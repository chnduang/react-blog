<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€æ–‡åƒé€reactäº‹ä»¶åŸç† | duangdongçš„react</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="reactç›¸å…³çŸ¥è¯†å½’çº³æ€»ç»“">
    <meta name="keywords" content="react,reactè¿›é˜¶,reactæ€§èƒ½ä¼˜åŒ–,react-hooks,reactæºç ">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.27287fd6.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/67.aa46c62c.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/100.27126660.js"><link rel="prefetch" href="/assets/js/101.09cf74ec.js"><link rel="prefetch" href="/assets/js/102.8cd6b4eb.js"><link rel="prefetch" href="/assets/js/103.c4f25168.js"><link rel="prefetch" href="/assets/js/104.4f1b4569.js"><link rel="prefetch" href="/assets/js/105.bc4fc023.js"><link rel="prefetch" href="/assets/js/106.b9d5be0c.js"><link rel="prefetch" href="/assets/js/107.f9a44dd7.js"><link rel="prefetch" href="/assets/js/108.0424a7b7.js"><link rel="prefetch" href="/assets/js/109.086a89ae.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/110.1e4c2c77.js"><link rel="prefetch" href="/assets/js/111.16e80560.js"><link rel="prefetch" href="/assets/js/112.441e61a6.js"><link rel="prefetch" href="/assets/js/113.41a44465.js"><link rel="prefetch" href="/assets/js/114.9efb5469.js"><link rel="prefetch" href="/assets/js/115.d095bf75.js"><link rel="prefetch" href="/assets/js/116.b368a7c1.js"><link rel="prefetch" href="/assets/js/117.3a319a71.js"><link rel="prefetch" href="/assets/js/118.7ea17677.js"><link rel="prefetch" href="/assets/js/119.df1f998f.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/120.935f9aea.js"><link rel="prefetch" href="/assets/js/121.c09de772.js"><link rel="prefetch" href="/assets/js/122.32443376.js"><link rel="prefetch" href="/assets/js/123.d0f8ea63.js"><link rel="prefetch" href="/assets/js/124.fdbcd92d.js"><link rel="prefetch" href="/assets/js/125.0de5eb94.js"><link rel="prefetch" href="/assets/js/126.fb5e629b.js"><link rel="prefetch" href="/assets/js/127.866d8d58.js"><link rel="prefetch" href="/assets/js/128.1aad073e.js"><link rel="prefetch" href="/assets/js/129.328f52fd.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/130.ac9676d9.js"><link rel="prefetch" href="/assets/js/131.9852c015.js"><link rel="prefetch" href="/assets/js/132.806bcfe3.js"><link rel="prefetch" href="/assets/js/133.073ecd1e.js"><link rel="prefetch" href="/assets/js/134.e2683d73.js"><link rel="prefetch" href="/assets/js/135.d16cdb0b.js"><link rel="prefetch" href="/assets/js/136.c3b47da6.js"><link rel="prefetch" href="/assets/js/137.f7fec328.js"><link rel="prefetch" href="/assets/js/138.ec6ab500.js"><link rel="prefetch" href="/assets/js/139.18b97522.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/140.c7df1047.js"><link rel="prefetch" href="/assets/js/141.484c6ca5.js"><link rel="prefetch" href="/assets/js/142.8eff7a66.js"><link rel="prefetch" href="/assets/js/143.60569694.js"><link rel="prefetch" href="/assets/js/144.01883b7c.js"><link rel="prefetch" href="/assets/js/145.a9241012.js"><link rel="prefetch" href="/assets/js/146.4b6f364c.js"><link rel="prefetch" href="/assets/js/147.9ed57153.js"><link rel="prefetch" href="/assets/js/148.e18d806a.js"><link rel="prefetch" href="/assets/js/149.e24c9de5.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.f648d829.js"><link rel="prefetch" href="/assets/js/23.f1afbc9c.js"><link rel="prefetch" href="/assets/js/24.7f3fc444.js"><link rel="prefetch" href="/assets/js/25.5a945cd4.js"><link rel="prefetch" href="/assets/js/26.7ef56339.js"><link rel="prefetch" href="/assets/js/27.74941107.js"><link rel="prefetch" href="/assets/js/28.20a36928.js"><link rel="prefetch" href="/assets/js/29.7cda6a44.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.97f5cf7e.js"><link rel="prefetch" href="/assets/js/31.eeee5c14.js"><link rel="prefetch" href="/assets/js/32.a2125816.js"><link rel="prefetch" href="/assets/js/33.b3fdf3bc.js"><link rel="prefetch" href="/assets/js/34.908ac5fb.js"><link rel="prefetch" href="/assets/js/35.9459a7c7.js"><link rel="prefetch" href="/assets/js/36.dc8e2582.js"><link rel="prefetch" href="/assets/js/37.27c69606.js"><link rel="prefetch" href="/assets/js/38.10b82911.js"><link rel="prefetch" href="/assets/js/39.fdc5aecb.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.901c96dc.js"><link rel="prefetch" href="/assets/js/41.4cbb9c4b.js"><link rel="prefetch" href="/assets/js/42.da47ce58.js"><link rel="prefetch" href="/assets/js/43.a7669073.js"><link rel="prefetch" href="/assets/js/44.08cc8605.js"><link rel="prefetch" href="/assets/js/45.5461c987.js"><link rel="prefetch" href="/assets/js/46.4c5ed7f9.js"><link rel="prefetch" href="/assets/js/47.450abe13.js"><link rel="prefetch" href="/assets/js/48.d0a778f3.js"><link rel="prefetch" href="/assets/js/49.611d9085.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.2563fd92.js"><link rel="prefetch" href="/assets/js/51.ff64258c.js"><link rel="prefetch" href="/assets/js/52.d47acb9b.js"><link rel="prefetch" href="/assets/js/53.09fd35d1.js"><link rel="prefetch" href="/assets/js/54.5e523072.js"><link rel="prefetch" href="/assets/js/55.8278650d.js"><link rel="prefetch" href="/assets/js/56.425f7e44.js"><link rel="prefetch" href="/assets/js/57.44699db6.js"><link rel="prefetch" href="/assets/js/58.25067fcf.js"><link rel="prefetch" href="/assets/js/59.3814ee9e.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.82621500.js"><link rel="prefetch" href="/assets/js/61.9880375b.js"><link rel="prefetch" href="/assets/js/62.3924c2b9.js"><link rel="prefetch" href="/assets/js/63.ff3650b8.js"><link rel="prefetch" href="/assets/js/64.0d46b236.js"><link rel="prefetch" href="/assets/js/65.f255f222.js"><link rel="prefetch" href="/assets/js/66.d797120d.js"><link rel="prefetch" href="/assets/js/68.0dbf39cf.js"><link rel="prefetch" href="/assets/js/69.116b53df.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/70.a05986f2.js"><link rel="prefetch" href="/assets/js/71.562a4365.js"><link rel="prefetch" href="/assets/js/72.c10c6194.js"><link rel="prefetch" href="/assets/js/73.d85c71e5.js"><link rel="prefetch" href="/assets/js/74.73f72e00.js"><link rel="prefetch" href="/assets/js/75.62c76a28.js"><link rel="prefetch" href="/assets/js/76.8d0d9036.js"><link rel="prefetch" href="/assets/js/77.4ede6642.js"><link rel="prefetch" href="/assets/js/78.7d4d4152.js"><link rel="prefetch" href="/assets/js/79.720e767d.js"><link rel="prefetch" href="/assets/js/80.e9d86233.js"><link rel="prefetch" href="/assets/js/81.40ea5e9f.js"><link rel="prefetch" href="/assets/js/82.78074ee1.js"><link rel="prefetch" href="/assets/js/83.72133cbf.js"><link rel="prefetch" href="/assets/js/84.52c5ea65.js"><link rel="prefetch" href="/assets/js/85.afce36a7.js"><link rel="prefetch" href="/assets/js/86.bdc638dd.js"><link rel="prefetch" href="/assets/js/87.11e34480.js"><link rel="prefetch" href="/assets/js/88.5fd9f0ef.js"><link rel="prefetch" href="/assets/js/89.718ec134.js"><link rel="prefetch" href="/assets/js/90.11f956de.js"><link rel="prefetch" href="/assets/js/91.985d80f2.js"><link rel="prefetch" href="/assets/js/92.9c876df3.js"><link rel="prefetch" href="/assets/js/93.da92c068.js"><link rel="prefetch" href="/assets/js/94.cf4ee959.js"><link rel="prefetch" href="/assets/js/95.665f55e6.js"><link rel="prefetch" href="/assets/js/96.2e80356d.js"><link rel="prefetch" href="/assets/js/97.d7d8ba2d.js"><link rel="prefetch" href="/assets/js/98.70eab878.js"><link rel="prefetch" href="/assets/js/99.60ddb42d.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdongçš„react</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/events/" class="nav-link router-link-active">
  äº‹ä»¶æœºåˆ¶
</a></div><div class="nav-item"><a href="/fiber/" class="nav-link">
  Fiber
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  è¿›é˜¶
</a></div><div class="nav-item"><a href="/hooks/" class="nav-link">
  Hooks
</a></div><div class="nav-item"><a href="/source-code/" class="nav-link">
  æºç è§£è¯»
</a></div><div class="nav-item"><a href="/performance/" class="nav-link">
  æ€§èƒ½ä¼˜åŒ–
</a></div><div class="nav-item"><a href="/base/" class="nav-link">
  åŸºç¡€
</a></div><div class="nav-item"><a href="/jest/" class="nav-link">
  å•å…ƒæµ‹è¯•
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/events/" class="nav-link router-link-active">
  äº‹ä»¶æœºåˆ¶
</a></div><div class="nav-item"><a href="/fiber/" class="nav-link">
  Fiber
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  è¿›é˜¶
</a></div><div class="nav-item"><a href="/hooks/" class="nav-link">
  Hooks
</a></div><div class="nav-item"><a href="/source-code/" class="nav-link">
  æºç è§£è¯»
</a></div><div class="nav-item"><a href="/performance/" class="nav-link">
  æ€§èƒ½ä¼˜åŒ–
</a></div><div class="nav-item"><a href="/base/" class="nav-link">
  åŸºç¡€
</a></div><div class="nav-item"><a href="/jest/" class="nav-link">
  å•å…ƒæµ‹è¯•
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/events/" aria-current="page" class="sidebar-link">è¿›é˜¶</a></li><li><a href="/events/Reactäº‹ä»¶æœºåˆ¶.html" class="sidebar-link">React äº‹ä»¶æœºåˆ¶</a></li><li><a href="/events/Renderå¦‚ä½•å¼ºåˆ¶å®ƒ.html" class="sidebar-link">ä»€ä¹ˆæ˜¯ React ä¸­çš„ Render ä»¥åŠå¦‚ä½•å¼ºåˆ¶å®ƒï¼Ÿ</a></li><li><a href="/events/react-äº‹ä»¶æœºåˆ¶.html" class="sidebar-link">Reactäº‹ä»¶æœºåˆ¶çš„ç†è§£ï¼Ÿ</a></li><li><a href="/events/reactäº‹ä»¶ç³»ç»ŸåŸç†.html" class="sidebar-link">React äº‹ä»¶ç³»ç»ŸåŸç†</a></li><li><a href="/events/ä¸€æ–‡åƒé€reactäº‹ä»¶åŸç†.html" class="active sidebar-link">ä¸€æ–‡åƒé€reactäº‹ä»¶åŸç†</a></li><li><a href="/events/ä¸€æ–‡è¯»æ‡‚Reactç»„ä»¶æ¸²æŸ“æ ¸å¿ƒåŸç†.html" class="sidebar-link">ä¸€æ–‡è¯»æ‡‚ React ç»„ä»¶æ¸²æŸ“æ ¸å¿ƒåŸç†</a></li><li><a href="/events/ä»æºç æ·±å…¥æ¢ç©¶React è¿è¡Œæ—¶ä¼˜åŒ–æ–¹æ¡ˆçš„æ¼”è¿›.html" class="sidebar-link">ä»æºç æ·±å…¥æ¢ç©¶React è¿è¡Œæ—¶ä¼˜åŒ–æ–¹æ¡ˆçš„æ¼”è¿›</a></li><li><a href="/events/ææ‡‚Reactè°ƒåº¦å™¨åŸç†.html" class="sidebar-link">ä¸ç”¨ä¸€è¡Œä»£ç ï¼Œææ‡‚Reactè°ƒåº¦å™¨åŸç†</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ä¸€æ–‡åƒé€reactäº‹ä»¶åŸç†"><a href="#ä¸€æ–‡åƒé€reactäº‹ä»¶åŸç†" class="header-anchor">#</a> ä¸€æ–‡åƒé€reactäº‹ä»¶åŸç†</h1> <blockquote><p><a href="https://mp.weixin.qq.com/s/LvzC74rlYZr4tSkFkxGAoA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/LvzC74rlYZr4tSkFkxGAoA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h1 id="ä¸€-å‰è¨€"><a href="#ä¸€-å‰è¨€" class="header-anchor">#</a> ä¸€ å‰è¨€</h1> <p>ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·æ¢è®¨ä¸€ä¸‹<code>React</code>äº‹ä»¶åŸç†ï¼Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°½é‡ç”¨é€šä¿—ç®€æ´çš„æ–¹å¼ï¼ŒæŠŠ<code>React</code>äº‹ä»¶ç³»ç»Ÿè®²çš„æ˜æ˜ç™½ç™½ã€‚</p> <p>æˆ‘ä»¬è®²çš„<code>react</code>ç‰ˆæœ¬æ˜¯<code>16.13.1</code> , <code>v17</code>ä¹‹å<code>react</code>å¯¹äºäº‹ä»¶ç³»ç»Ÿä¼šæœ‰ç›¸å…³çš„æ”¹ç‰ˆï¼Œæ–‡ç« ååŠéƒ¨åˆ†ä¼šæåŠã€‚</p> <p>è€è§„çŸ©ï¼Œåœ¨æ­£å¼è®²è§£<code>react</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæƒ³æƒ³è¿™å‡ ä¸ªé—®é¢˜(<strong>å¦‚æœæˆ‘æ˜¯é¢è¯•å®˜ï¼Œä½ ä¼šæ€ä¹ˆå›ç­”?</strong>)ï¼š</p> <ul><li>1 æˆ‘ä»¬å†™çš„äº‹ä»¶æ˜¯ç»‘å®šåœ¨<code>dom</code>ä¸Šä¹ˆï¼Œå¦‚æœä¸æ˜¯ç»‘å®šåœ¨å“ªé‡Œï¼Ÿ</li> <li>2 ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„äº‹ä»¶ä¸èƒ½ç»‘å®šç»™ç»„ä»¶ï¼Ÿ</li> <li>3 ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„äº‹ä»¶æ‰‹åŠ¨ç»‘å®š<code>this</code>(ä¸æ˜¯ç®­å¤´å‡½æ•°çš„æƒ…å†µ)</li> <li>4 ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ <code>return false</code>æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Ÿ</li> <li>5 <code>react</code>æ€ä¹ˆé€šè¿‡<code>dom</code>å…ƒç´ ï¼Œæ‰¾åˆ°ä¸ä¹‹å¯¹åº”çš„ <code>fiber</code>å¯¹è±¡çš„ï¼Ÿ</li> <li>6 <code>onClick</code>æ˜¯åœ¨å†’æ³¡é˜¶æ®µç»‘å®šçš„ï¼Ÿé‚£ä¹ˆ<code>onClickCapture</code>å°±æ˜¯åœ¨äº‹ä»¶æ•è·é˜¶æ®µç»‘å®šçš„å—ï¼Ÿ</li></ul> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJvIa01mAsTNF4mZMy2fsSWicp4VEsdj7xeRuScjTEQHibLayphqpySHcA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">B7836791-2C40-48BA-83BF-835E0BD87B55.jpg</p> <h2 id="å¿…è¦çš„çŸ¥è¯†æ¦‚å¿µ"><a href="#å¿…è¦çš„çŸ¥è¯†æ¦‚å¿µ" class="header-anchor">#</a> å¿…è¦çš„çŸ¥è¯†æ¦‚å¿µ</h2> <p>åœ¨å¼„æ¸…æ¥š<code>react</code>äº‹ä»¶ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªæ¦‚å¿µæˆ‘ä»¬å¿…é¡»å¼„æ¸…æ¥šï¼Œå› ä¸ºåªæœ‰å¼„æ˜ç™½è¿™å‡ ä¸ªæ¦‚å¿µï¼Œåœ¨äº‹ä»¶è§¦å‘é˜¶æ®µï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„ç†è§£<code>react</code>å¤„ç†äº‹ä»¶æœ¬è´¨ã€‚</p> <h3 id="æˆ‘ä»¬å†™åœ¨jsxäº‹ä»¶ç»ˆå°†å˜æˆä»€ä¹ˆ"><a href="#æˆ‘ä»¬å†™åœ¨jsxäº‹ä»¶ç»ˆå°†å˜æˆä»€ä¹ˆ" class="header-anchor">#</a> æˆ‘ä»¬å†™åœ¨JSXäº‹ä»¶ç»ˆå°†å˜æˆä»€ä¹ˆï¼Ÿ</h3> <p>æˆ‘ä»¬å…ˆå†™ä¸€æ®µå«æœ‰ç‚¹å‡»äº‹ä»¶çš„<code>react JSX</code>è¯­æ³•ï¼Œçœ‹ä¸€ä¸‹å®ƒæœ€ç»ˆä¼šå˜æˆä»€ä¹ˆæ ·å­ï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>class Index extends React.Component{
    handerClick= (value) =&gt; console.log(value) 
    render(){
        return &lt;div&gt;
            &lt;button onClick={ this.handerClick } &gt; æŒ‰é’®ç‚¹å‡» &lt;/button&gt;
        &lt;/div&gt;
    }
}
</code></pre></div><p>ç»è¿‡<code>babel</code>è½¬æ¢æˆ<code>React.createElement</code>å½¢å¼ï¼Œå¦‚ä¸‹ï¼š</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJJahUR1Z33lpxmZbZib4mK2DRicjlHgbOKsyK3bLUkFrWENflaAlEYYMw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">babel.jpg</p> <p>æœ€ç»ˆè½¬æˆ<code>fiber</code>å¯¹è±¡å½¢å¼å¦‚ä¸‹ï¼š</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJJcMr48au9dvwHUoH3ffJoOafWib1iccEYTia9ACgl4oicV5nymeElxSlIw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">fiber.jpg</p> <p><code>fiber</code>å¯¹è±¡ä¸Šçš„<code>memoizedProps</code> å’Œ <code>pendingProps</code>ä¿å­˜äº†æˆ‘ä»¬çš„äº‹ä»¶ã€‚</p> <h3 id="ä»€ä¹ˆæ˜¯åˆæˆäº‹ä»¶"><a href="#ä»€ä¹ˆæ˜¯åˆæˆäº‹ä»¶" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯åˆæˆäº‹ä»¶ï¼Ÿ</h3> <p>é€šè¿‡ä¸Šä¸€æ­¥æˆ‘ä»¬çœ‹åˆ°äº†ï¼Œæˆ‘ä»¬å£°æ˜äº‹ä»¶ä¿å­˜çš„ä½ç½®ã€‚ä½†æ˜¯äº‹ä»¶æœ‰æ²¡æœ‰è¢«çœŸæ­£çš„æ³¨å†Œå‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ï¼š</p> <p>æˆ‘ä»¬çœ‹ä¸€ä¸‹å½“å‰è¿™ä¸ªå…ƒç´ <code>&lt;button&gt;</code>ä¸Šæœ‰æ²¡æœ‰ç»‘å®šè¿™ä¸ªäº‹ä»¶ç›‘å¬å™¨å‘¢ï¼Ÿ</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJQMsySfXz8S6wKO34YK5wklp5RDib95E2u3eWX1ujVqzwD8x0ZWicsZpw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">button_event.jpg</p> <p><strong>buttonä¸Šç»‘å®šçš„äº‹ä»¶</strong></p> <p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° ï¼Œ<code>button</code>ä¸Šç»‘å®šäº†ä¸¤ä¸ªäº‹ä»¶ï¼Œä¸€ä¸ªæ˜¯<code>document</code>ä¸Šçš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯<code>button</code>ï¼Œä½†æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°<code>handle</code>ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬çš„<code>handerClick</code>äº‹ä»¶ï¼Œè€Œæ˜¯<code>noop</code>ã€‚</p> <p><code>noop</code>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€æ¥çœ‹ã€‚</p> <p>åŸæ¥<code>noop</code>å°±æŒ‡å‘ä¸€ä¸ªç©ºå‡½æ•°ã€‚</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJfRAX3qRK8pNpjxOVC6uib66tzOEulItlCSKFicPkBlTyE0d2iauJViaKsQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">noop.jpg</p> <p><strong>ç„¶åæˆ‘ä»¬çœ‹<code>document</code>ç»‘å®šçš„äº‹ä»¶</strong></p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJgEhMwxlpKicjWlgJRuxaK5xzHCsbP90Mhl3yNuQewwJpKdGbicZjyPqQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">document.jpg</p> <p>å¯ä»¥çœ‹åˆ°<code>click</code>äº‹ä»¶è¢«ç»‘å®šåœ¨<code>document</code>ä¸Šäº†ã€‚</p> <p>æ¥ä¸‹æ¥æˆ‘ä»¬å†ææäº‹æƒ…ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼Œåœ¨<code>demo</code>é¡¹ç›®ä¸­åŠ ä¸Šä¸€ä¸ª<code>input</code>è¾“å…¥æ¡†ï¼Œå¹¶ç»‘å®šä¸€ä¸ª<code>onChange</code>äº‹ä»¶ã€‚çå¤§çœ¼ç›çœ‹çœ‹æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>class Index extends React.Component{
    componentDidMount(){
        console.log(this)
    }
    handerClick= (value) =&gt; console.log(value) 
    handerChange=(value) =&gt; console.log(value)
    render(){
        return &lt;div style={{ marginTop:'50px' }} &gt;
            &lt;button onClick={ this.handerClick } &gt; æŒ‰é’®ç‚¹å‡» &lt;/button&gt;
            &lt;input  placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; onChange={ this.handerChange }  /&gt;
        &lt;/div&gt;
    }
}
</code></pre></div><p><strong>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹<code>input dom</code>å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶</strong></p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJIe7R63IoYxJr2nfeMOuP1aia8DMEjCcGpVQ1rAw4GO3VJ3qNsQ33s8A/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">22BEC470-233A-4C50-9C47-D21D343C055D.jpg</p> <p><strong>ç„¶åæˆ‘ä»¬çœ‹ä¸€ä¸‹<code>document</code>ä¸Šç»‘å®šçš„äº‹ä»¶</strong></p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJRaNQ4e0F8quv0u0UzSGOfokg9X9wKr0hsDfr3Q8qNgFnGwnXWBmcgA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">8E1D3BDB-ACFB-4E49-A5FF-CF990C47A60E.jpg</p> <p>æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ç»™<code>&lt;input&gt;</code>ç»‘å®šçš„<code>onChange</code>ï¼Œå¹¶æ²¡æœ‰ç›´æ¥ç»‘å®šåœ¨<code>input</code>ä¸Šï¼Œè€Œæ˜¯ç»Ÿä¸€ç»‘å®šåœ¨äº†<code>document</code>ä¸Šï¼Œç„¶åæˆ‘ä»¬<code>onChange</code>è¢«å¤„ç†æˆå¾ˆå¤šäº‹ä»¶ç›‘å¬å™¨ï¼Œæ¯”å¦‚<code>blur</code> , <code>change</code> , <code>input</code> , <code>keydown</code> , <code>keyup</code> ç­‰ã€‚</p> <p>ç»¼ä¸Šæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p> <ul><li>â‘ <strong>æˆ‘ä»¬åœ¨ <code>jsx</code> ä¸­ç»‘å®šçš„äº‹ä»¶(demoä¸­çš„<code>handerClick</code>ï¼Œ<code>handerChange</code>),æ ¹æœ¬å°±æ²¡æœ‰æ³¨å†Œåˆ°çœŸå®çš„<code>dom</code>ä¸Šã€‚æ˜¯ç»‘å®šåœ¨<code>document</code>ä¸Šç»Ÿä¸€ç®¡ç†çš„ã€‚</strong></li> <li>â‘¡<strong>çœŸå®çš„<code>dom</code>ä¸Šçš„<code>click</code>äº‹ä»¶è¢«å•ç‹¬å¤„ç†,å·²ç»è¢«<code>react</code>åº•å±‚æ›¿æ¢æˆç©ºå‡½æ•°ã€‚</strong></li> <li>â‘¢<strong>æˆ‘ä»¬åœ¨<code>react</code>ç»‘å®šçš„äº‹ä»¶,æ¯”å¦‚<code>onChange</code>ï¼Œåœ¨<code>document</code>ä¸Šï¼Œå¯èƒ½æœ‰å¤šä¸ªäº‹ä»¶ä¸ä¹‹å¯¹åº”ã€‚</strong></li> <li>â‘£ <strong><code>react</code>å¹¶ä¸æ˜¯ä¸€å¼€å§‹ï¼ŒæŠŠæ‰€æœ‰çš„äº‹ä»¶éƒ½ç»‘å®šåœ¨<code>document</code>ä¸Šï¼Œè€Œæ˜¯é‡‡å–äº†ä¸€ç§æŒ‰éœ€ç»‘å®šï¼Œæ¯”å¦‚å‘ç°äº†<code>onClick</code>äº‹ä»¶,å†å»ç»‘å®š<code>document click</code>äº‹ä»¶ã€‚</strong></li></ul> <p>é‚£ä¹ˆä»€ä¹ˆæ˜¯<code>react</code>äº‹ä»¶åˆæˆå‘¢ï¼Ÿ</p> <p><strong>åœ¨<code>react</code>ä¸­ï¼Œæˆ‘ä»¬ç»‘å®šçš„äº‹ä»¶<code>onClick</code>ç­‰ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯ç”±åŸç”Ÿäº‹ä»¶åˆæˆçš„<code>React</code>äº‹ä»¶ï¼Œæ¯”å¦‚ <code>click</code>äº‹ä»¶åˆæˆä¸º<code>onClick</code>äº‹ä»¶ã€‚æ¯”å¦‚<code>blur</code> , <code>change</code> , <code>input</code> , <code>keydown</code> , <code>keyup</code>ç­‰ , åˆæˆä¸º<code>onChange</code>ã€‚</strong></p> <p>é‚£ä¹ˆ<code>react</code>é‡‡å–è¿™ç§äº‹ä»¶åˆæˆçš„æ¨¡å¼å‘¢ï¼Ÿ</p> <p>ä¸€æ–¹é¢ï¼Œå°†äº‹ä»¶ç»‘å®šåœ¨<code>document</code>ç»Ÿä¸€ç®¡ç†ï¼Œé˜²æ­¢å¾ˆå¤šäº‹ä»¶ç›´æ¥ç»‘å®šåœ¨åŸç”Ÿçš„<code>dom</code>å…ƒç´ ä¸Šã€‚é€ æˆä¸€äº›ä¸å¯æ§çš„æƒ…å†µ</p> <p>å¦ä¸€æ–¹é¢ï¼Œ <code>React</code> æƒ³å®ç°ä¸€ä¸ªå…¨æµè§ˆå™¨çš„æ¡†æ¶ï¼Œ ä¸ºäº†å®ç°è¿™ç§ç›®æ ‡å°±éœ€è¦æä¾›å…¨æµè§ˆå™¨ä¸€è‡´æ€§çš„äº‹ä»¶ç³»ç»Ÿï¼Œä»¥æ­¤æŠ¹å¹³ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ã€‚</p> <p>æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œä¼šä»‹ç»<code>react</code>æ˜¯æ€ä¹ˆåšäº‹ä»¶åˆæˆçš„ã€‚</p> <h3 id="domå…ƒç´ å¯¹åº”çš„fiber-tagå¯¹è±¡"><a href="#domå…ƒç´ å¯¹åº”çš„fiber-tagå¯¹è±¡" class="header-anchor">#</a> domå…ƒç´ å¯¹åº”çš„fiber Tagå¯¹è±¡</h3> <p>æˆ‘ä»¬çŸ¥é“äº†<code>react</code>æ€ä¹ˆå‚¨å­˜äº†æˆ‘ä»¬çš„äº‹ä»¶å‡½æ•°å’Œäº‹ä»¶åˆæˆå› æœã€‚æ¥ä¸‹æ¥æˆ‘æƒ³è®©å¤§å®¶è®°ä½ä¸€ç§ç±»å‹çš„ <code>fiber</code> å¯¹è±¡,å› ä¸ºåé¢ä¼šç”¨åˆ°ï¼Œè¿™å¯¹åç»­çš„ç†è§£å¾ˆæœ‰å¸®åŠ©ã€‚</p> <p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä»£ç ç‰‡æ®µï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;div&gt; 
  &lt;div&gt; hello , my name is alien &lt;/div&gt;
&lt;/div&gt;
</code></pre></div><p>çœ‹<code>&lt;div&gt; hello , my name is alien &lt;/div&gt;</code> å¯¹åº”çš„ <code>fiber</code>ç±»å‹ã€‚tag = 5</p> <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/2KticQlBJtdzYHmxW0oy7mdIaqtmicIXNJsTicvBiajJ0ESuicj1fB0S7UX7C1librMXJiaU5Bwk8g7qLF52MdHujsRmw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡">ç„¶åæˆ‘ä»¬å»<code>react</code>æºç ä¸­æ‰¾åˆ°è¿™ç§ç±»çš„<code>fiber</code>ç±»å‹ã€‚</p> <blockquote><p>/react-reconciler/src/ReactWorkTagsq.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>export const HostComponent = 5; // å…ƒç´ èŠ‚ç‚¹
</code></pre></div><p>å¥½çš„ ï¼Œæˆ‘ä»¬æš‚ä¸”æŠŠ <code>HostComponent</code> å’Œ <code>HostText</code>è®°å½•ğŸ“ä¸‹æ¥ã€‚æ¥ä¸‹æ¥å›å½’æ­£é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<code>react</code>äº‹ä»¶åˆæˆæœºåˆ¶ã€‚</p> <h1 id="äºŒ-äº‹ä»¶åˆå§‹åŒ–-äº‹ä»¶åˆæˆ-æ’ä»¶æœºåˆ¶"><a href="#äºŒ-äº‹ä»¶åˆå§‹åŒ–-äº‹ä»¶åˆæˆ-æ’ä»¶æœºåˆ¶" class="header-anchor">#</a> äºŒ äº‹ä»¶åˆå§‹åŒ–-äº‹ä»¶åˆæˆï¼Œæ’ä»¶æœºåˆ¶</h1> <p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹<code>react</code>è¿™ä¹ˆå¤„ç†äº‹ä»¶åˆæˆçš„ã€‚é¦–å…ˆæˆ‘ä»¬ä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼Œ<code>react</code>å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰äº‹ä»¶éƒ½<strong>ç»‘å®šè¿›å»</strong>ï¼Œè€Œæ˜¯å¦‚æœå‘ç°é¡¹ç›®ä¸­æœ‰<code>onClick</code>ï¼Œæ‰ç»‘å®š<code>click</code>äº‹ä»¶ï¼Œå‘ç°æœ‰<code>onChange</code>äº‹ä»¶ï¼Œæ‰ç»‘å®š<code>blur</code> , <code>change</code> , <code>input</code> , <code>keydown</code> , <code>keyup</code>ç­‰ã€‚æ‰€ä»¥ä¸ºäº†æŠŠåŸç†æçš„æ¸…æ¸…æ¥šæ¥šï¼Œç¬”è€…æŠŠäº‹ä»¶åŸç†åˆ†æˆä¸‰éƒ¨åˆ†æ¥æå®šï¼š</p> <ul><li>1 <code>react</code>å¯¹äº‹ä»¶æ˜¯å¦‚ä½•åˆæˆçš„ã€‚</li> <li>2 <code>react</code>äº‹ä»¶æ˜¯æ€ä¹ˆç»‘å®šçš„ã€‚</li> <li>3 <code>react</code>äº‹ä»¶è§¦å‘æµç¨‹ã€‚</li></ul> <h2 id="äº‹ä»¶åˆæˆ-äº‹ä»¶æ’ä»¶"><a href="#äº‹ä»¶åˆæˆ-äº‹ä»¶æ’ä»¶" class="header-anchor">#</a> äº‹ä»¶åˆæˆ-äº‹ä»¶æ’ä»¶</h2> <h3 id="_1-å¿…è¦æ¦‚å¿µ"><a href="#_1-å¿…è¦æ¦‚å¿µ" class="header-anchor">#</a> 1 å¿…è¦æ¦‚å¿µ</h3> <p>æˆ‘ä»¬å…ˆæ¥çœ‹æ¥å‡ ä¸ªå¸¸é‡å…³ç³»ï¼Œè¿™å¯¹äºæˆ‘ä»¬åƒé€<code>react</code>äº‹ä»¶åŸç†å¾ˆæœ‰å¸®åŠ©ã€‚åœ¨è§£ææ¥çš„è®²è§£ä¸­ï¼Œæˆ‘ä¹Ÿä¼šè®²åˆ°è¿™å‡ ä¸ªå¯¹è±¡å¦‚ä½•æ¥çš„ï¼Œå…·ä½“æœ‰ä»€ä¹ˆä½œç”¨ã€‚</p> <h4 id="_1namestoplugins"><a href="#_1namestoplugins" class="header-anchor">#</a> â‘ namesToPlugins</h4> <p>ç¬¬ä¸€ä¸ªæ¦‚å¿µï¼š<strong>namesToPlugins</strong> è£…äº‹ä»¶å -&gt; äº‹ä»¶æ¨¡å—æ’ä»¶çš„æ˜ å°„,<code>namesToPlugins</code>æœ€ç»ˆçš„æ ·å­å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>const namesToPlugins = {
    SimpleEventPlugin,
    EnterLeaveEventPlugin,
    ChangeEventPlugin,
    SelectEventPlugin,
    BeforeInputEventPlugin,
}
</code></pre></div><p><code>SimpleEventPlugin</code>ç­‰æ˜¯å¤„ç†å„ä¸ªäº‹ä»¶å‡½æ•°çš„æ’ä»¶ï¼Œæ¯”å¦‚ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶ï¼Œå°±ä¼šæ‰¾åˆ°<code>SimpleEventPlugin</code>å¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚æˆ‘ä»¬å…ˆè®°å½•ä¸‹å®ƒï¼Œè‡³äºå…·ä½“æœ‰ä»€ä¹ˆä½œç”¨ï¼Œæ¥ä¸‹æ¥ä¼šè®²åˆ°ã€‚</p> <h4 id="_2plugins"><a href="#_2plugins" class="header-anchor">#</a> â‘¡plugins</h4> <p><code>plugins</code>ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯ä¸Šé¢æ³¨å†Œçš„æ‰€æœ‰æ’ä»¶åˆ—è¡¨,åˆå§‹åŒ–ä¸ºç©ºã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>const  plugins = [LegacySimpleEventPlugin, LegacyEnterLeaveEventPlugin, ...];
</code></pre></div><h4 id="_3registrationnamemodules"><a href="#_3registrationnamemodules" class="header-anchor">#</a> â‘¢registrationNameModules</h4> <p><code>registrationNameModules</code>è®°å½•äº†Reactåˆæˆçš„äº‹ä»¶-å¯¹åº”çš„äº‹ä»¶æ’ä»¶çš„å…³ç³»ï¼Œåœ¨<code>React</code>ä¸­ï¼Œå¤„ç†<code>props</code>ä¸­äº‹ä»¶çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ä¸åŒçš„äº‹ä»¶åç§°ï¼Œæ‰¾åˆ°å¯¹åº”çš„äº‹ä»¶æ’ä»¶ï¼Œç„¶åç»Ÿä¸€ç»‘å®šåœ¨<code>document</code>ä¸Šã€‚å¯¹äºæ²¡æœ‰å‡ºç°è¿‡çš„äº‹ä»¶ï¼Œå°±ä¸ä¼šç»‘å®šï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°ã€‚<code>registrationNameModules</code>å¤§è‡´çš„æ ·å­å¦‚ä¸‹æ‰€ç¤ºã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>{
    onBlur: SimpleEventPlugin,
    onClick: SimpleEventPlugin,
    onClickCapture: SimpleEventPlugin,
    onChange: ChangeEventPlugin,
    onChangeCapture: ChangeEventPlugin,
    onMouseEnter: EnterLeaveEventPlugin,
    onMouseLeave: EnterLeaveEventPlugin,
    ...
}
</code></pre></div><h4 id="_4äº‹ä»¶æ’ä»¶"><a href="#_4äº‹ä»¶æ’ä»¶" class="header-anchor">#</a> â‘£äº‹ä»¶æ’ä»¶</h4> <p>é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆå°±è¦ææ¸…æ¥šï¼Œ<code>SimpleEventPlugin</code>,<code>EnterLeaveEventPlugin</code>æ¯ä¸ªæ’ä»¶éƒ½æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬æ‹¿<code>SimpleEventPlugin</code>ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å®ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>const SimpleEventPlugin = {
    eventTypes:{ 
        'click':{ /* å¤„ç†ç‚¹å‡»äº‹ä»¶  */
            phasedRegistrationNames:{
                bubbled: 'onClick',       // å¯¹åº”çš„äº‹ä»¶å†’æ³¡ - onClick 
                captured:'onClickCapture' //å¯¹åº”äº‹ä»¶æ•è·é˜¶æ®µ - onClickCapture
            },
            dependencies: ['click'], //äº‹ä»¶ä¾èµ–
            ...
        },
        'blur':{ /* å¤„ç†å¤±å»ç„¦ç‚¹äº‹ä»¶ */ },
        ...
    }
    extractEvents:function(topLevelType,targetInst,){ /* eventTypes é‡Œé¢çš„äº‹ä»¶å¯¹åº”çš„ç»Ÿä¸€äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ¥ä¸‹æ¥ä¼šé‡ç‚¹è®²åˆ° */ }
}
</code></pre></div><p>é¦–å…ˆäº‹ä»¶æ’ä»¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ä¸¤ä¸ªå±æ€§ï¼Œç¬¬ä¸€ä¸ª<code>extractEvents</code>ä½œä¸ºäº‹ä»¶ç»Ÿä¸€å¤„ç†å‡½æ•°ï¼Œç¬¬äºŒä¸ª<code>eventTypes</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¿å­˜äº†åŸç”Ÿäº‹ä»¶åå’Œå¯¹åº”çš„é…ç½®é¡¹<code>dispatchConfig</code>çš„æ˜ å°„å…³ç³»ã€‚ç”±äºv16Reactçš„äº‹ä»¶æ˜¯ç»Ÿä¸€ç»‘å®šåœ¨<code>document</code>ä¸Šçš„ï¼ŒReactç”¨ç‹¬ç‰¹çš„äº‹ä»¶åç§°æ¯”å¦‚<code>onClick</code>å’Œ<code>onClickCapture</code>ï¼Œæ¥è¯´æ˜æˆ‘ä»¬ç»™ç»‘å®šçš„å‡½æ•°åˆ°åº•æ˜¯åœ¨å†’æ³¡äº‹ä»¶é˜¶æ®µï¼Œè¿˜æ˜¯æ•è·äº‹ä»¶é˜¶æ®µæ‰§è¡Œã€‚</p> <h4 id="_5-registrationnamedependencies"><a href="#_5-registrationnamedependencies" class="header-anchor">#</a> â‘¤ registrationNameDependencies</h4> <p><code>registrationNameDependencies</code>ç”¨æ¥è®°å½•ï¼Œåˆæˆäº‹ä»¶æ¯”å¦‚ <code>onClick</code> å’ŒåŸç”Ÿäº‹ä»¶ <code>click</code>å¯¹åº”å…³ç³»ã€‚æ¯”å¦‚ <code>onChange</code> å¯¹åº” <code>change</code> , <code>input</code> , <code>keydown</code> , <code>keyup</code>äº‹ä»¶ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>{
    onBlur: ['blur'],
    onClick: ['click'],
    onClickCapture: ['click'],
    onChange: ['blur', 'change', 'click', 'focus', 'input', 'keydown', 'keyup', 'selectionchange'],
    onMouseEnter: ['mouseout', 'mouseover'],
    onMouseLeave: ['mouseout', 'mouseover'],
    ...
}
</code></pre></div><h3 id="_2-äº‹ä»¶åˆå§‹åŒ–"><a href="#_2-äº‹ä»¶åˆå§‹åŒ–" class="header-anchor">#</a> 2 äº‹ä»¶åˆå§‹åŒ–</h3> <p>å¯¹äºäº‹ä»¶åˆæˆï¼Œ<code>v16.13.1</code>ç‰ˆæœ¬<code>react</code>é‡‡ç”¨äº†åˆå§‹åŒ–æ³¨å†Œæ–¹å¼ã€‚</p> <blockquote><p>react-dom/src/client/ReactDOMClientInjection.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>/* ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œäº‹ä»¶ï¼š  */
injectEventPluginsByName({
    SimpleEventPlugin: SimpleEventPlugin,
    EnterLeaveEventPlugin: EnterLeaveEventPlugin,
    ChangeEventPlugin: ChangeEventPlugin,
    SelectEventPlugin: SelectEventPlugin,
    BeforeInputEventPlugin: BeforeInputEventPlugin,
});
</code></pre></div><p><code>injectEventPluginsByName</code> è¿™ä¸ªå‡½æ•°å…·ä½“æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œå®ƒåœ¨<code>react</code>åº•å±‚æ˜¯é»˜è®¤æ‰§è¡Œçš„ã€‚æˆ‘ä»¬æ¥ç®€åŒ–è¿™ä¸ªå‡½æ•°,çœ‹å®ƒåˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ã€‚</p> <blockquote><p>legacy-event/EventPluginRegistry.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>/* æ³¨å†Œäº‹ä»¶æ’ä»¶ */
export function injectEventPluginsByName(injectedNamesToPlugins){
     for (const pluginName in injectedNamesToPlugins) {
         namesToPlugins[pluginName] = injectedNamesToPlugins[pluginName]
     }
     recomputePluginOrdering()
}
</code></pre></div><p><code>injectEventPluginsByName</code>åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå½¢æˆä¸Šè¿°çš„<code>namesToPlugins</code>ï¼Œç„¶åæ‰§è¡Œ<code>recomputePluginOrdering</code>ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹<code>recomputePluginOrdering</code>åšäº†å†™ä»€ä¹ˆï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>const eventPluginOrder = [ 'SimpleEventPlugin' , 'EnterLeaveEventPlugin','ChangeEventPlugin','SelectEventPlugin' , 'BeforeInputEventPlugin' ]

function recomputePluginOrdering(){
    for (const pluginName in namesToPlugins) {
        /* æ‰¾åˆ°å¯¹åº”çš„äº‹ä»¶å¤„ç†æ’ä»¶ï¼Œæ¯”å¦‚ SimpleEventPlugin  */
        const pluginModule = namesToPlugins[pluginName];
        const pluginIndex = eventPluginOrder.indexOf(pluginName);
        /* å¡«å…… plugins æ•°ç»„  */
        plugins[pluginIndex] = pluginModule;
    }

    const publishedEvents = pluginModule.eventTypes;
    for (const eventName in publishedEvents) {
       // publishedEvents[eventName] -&gt; eventConfig , pluginModule -&gt; äº‹ä»¶æ’ä»¶ ï¼Œ eventName -&gt; äº‹ä»¶åç§°
        publishEventForPlugin(publishedEvents[eventName],pluginModule,eventName,)
    } 
}
ã€‘
</code></pre></div><p><strong>recomputePluginOrdering</strong>,ä½œç”¨å¾ˆæ˜ç¡®äº†ï¼Œå½¢æˆä¸Šé¢è¯´çš„é‚£ä¸ª<code>plugins</code>,æ•°ç»„ã€‚ç„¶åå°±æ˜¯<strong>é‡ç‚¹çš„å‡½æ•°<code>publishEventForPlugin</code></strong>ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>/*
  dispatchConfig -&gt; åŸç”Ÿäº‹ä»¶å¯¹åº”é…ç½®é¡¹ { phasedRegistrationNames :{  å†’æ³¡ æ•è·  } ï¼Œ   }
  pluginModule -&gt; äº‹ä»¶æ’ä»¶ æ¯”å¦‚SimpleEventPlugin  
  eventName -&gt; åŸç”Ÿäº‹ä»¶åç§°ã€‚
*/
function publishEventForPlugin (dispatchConfig,pluginModule,eventName){
    eventNameDispatchConfigs[eventName] = dispatchConfig;
    /* äº‹ä»¶ */
    const phasedRegistrationNames = dispatchConfig.phasedRegistrationNames;
    if (phasedRegistrationNames) {
    for (const phaseName in phasedRegistrationNames) {
        if (phasedRegistrationNames.hasOwnProperty(phaseName)) {
            // phasedRegistrationName Reactäº‹ä»¶å æ¯”å¦‚ onClick / onClickCapture
            const phasedRegistrationName = phasedRegistrationNames[phaseName];
            // å¡«å……å½¢æˆ registrationNameModules React åˆæˆäº‹ä»¶ -&gt; React å¤„ç†äº‹ä»¶æ’ä»¶æ˜ å°„å…³ç³»
            registrationNameModules[phasedRegistrationName] = pluginModule;
            // å¡«å……å½¢æˆ registrationNameDependencies React åˆæˆäº‹ä»¶ -&gt; åŸç”Ÿäº‹ä»¶ æ˜ å°„å…³ç³»
            registrationNameDependencies[phasedRegistrationName] = pluginModule.eventTypes[eventName].dependencies;
        }
    }
    return true;
    }
}
</code></pre></div><p><code>publishEventForPlugin</code> ä½œç”¨å½¢æˆä¸Šè¿°çš„ <strong><code>registrationNameModules</code></strong> å’Œ <strong><code>registrationNameDependencies</code></strong> å¯¹è±¡ä¸­çš„æ˜ å°„å…³ç³»ã€‚</p> <h3 id="_3-äº‹ä»¶åˆæˆæ€»ç»“"><a href="#_3-äº‹ä»¶åˆæˆæ€»ç»“" class="header-anchor">#</a> 3 äº‹ä»¶åˆæˆæ€»ç»“</h3> <p>åˆ°è¿™é‡Œæ•´ä¸ªåˆå§‹åŒ–é˜¶æ®µå·²ç»å®Œäº‹äº†ï¼Œæˆ‘æ¥æ€»ç»“ä¸€ä¸‹åˆå§‹åŒ–äº‹ä»¶åˆæˆéƒ½åšäº†äº›ä»€ä¹ˆã€‚è¿™ä¸ªé˜¶æ®µä¸»è¦å½¢æˆäº†ä¸Šè¿°çš„å‡ ä¸ªé‡è¦å¯¹è±¡ï¼Œæ„å»ºåˆå§‹åŒ–Reactåˆæˆäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶çš„å¯¹åº”å…³ç³»ï¼Œåˆæˆäº‹ä»¶å’Œå¯¹åº”çš„äº‹ä»¶å¤„ç†æ’ä»¶å…³ç³»ã€‚æ¥ä¸‹æ¥å°±æ˜¯äº‹ä»¶ç»‘å®šé˜¶æ®µã€‚</p> <h1 id="ä¸‰-äº‹ä»¶ç»‘å®š-ä»ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶å¼€å§‹"><a href="#ä¸‰-äº‹ä»¶ç»‘å®š-ä»ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶å¼€å§‹" class="header-anchor">#</a> ä¸‰ äº‹ä»¶ç»‘å®š-ä»ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶å¼€å§‹</h1> <h2 id="äº‹ä»¶ç»‘å®šæµç¨‹"><a href="#äº‹ä»¶ç»‘å®šæµç¨‹" class="header-anchor">#</a> äº‹ä»¶ç»‘å®šæµç¨‹</h2> <p>å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶ä¸­è¿™ä¹ˆå†™ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œ<code>React</code>ä¼šä¸€æ­¥æ­¥å¦‚ä½•å¤„ç†ã€‚</p> <h3 id="_1-diffproperties-å¤„ç†reactåˆæˆäº‹ä»¶"><a href="#_1-diffproperties-å¤„ç†reactåˆæˆäº‹ä»¶" class="header-anchor">#</a> 1 diffProperties å¤„ç†Reactåˆæˆäº‹ä»¶</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;div&gt;
  &lt;button onClick={ this.handerClick }  className=&quot;button&quot; &gt;ç‚¹å‡»&lt;/button&gt;
&lt;/div&gt;
</code></pre></div><p>ç¬¬ä¸€æ­¥ï¼Œé¦–å…ˆé€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬ç»‘å®šç»™hostComponentç§ç±»çš„fiber(å¦‚ä¸Šçš„buttonå…ƒç´ )ï¼Œä¼š <code>button</code> å¯¹åº”çš„fiberä¸Šï¼Œä»¥<code>memoizedProps</code> å’Œ <code>pendingProps</code>å½¢æˆä¿å­˜ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>button å¯¹åº” fiber
memoizedProps = {
   onClick:function handerClick(){},
   className:'button'
}
</code></pre></div><p>ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">58E6A4AF-1902-42BC-9D11-B47234037E01.jpg</p> <p>ç¬¬äºŒæ­¥ï¼ŒReactåœ¨è°ƒåˆå­èŠ‚ç‚¹åï¼Œè¿›å…¥diffé˜¶æ®µï¼Œå¦‚æœåˆ¤æ–­æ˜¯<code>HostComponent</code>(domå…ƒç´ )ç±»å‹çš„fiberï¼Œä¼šç”¨diff propså‡½æ•°<code>diffProperties</code>å•ç‹¬å¤„ç†ã€‚</p> <blockquote><p>react-dom/src/client/ReactDOMComponent.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function diffProperties(){
    /* åˆ¤æ–­å½“å‰çš„ propKey æ˜¯ä¸æ˜¯ Reactåˆæˆäº‹ä»¶ */
    if(registrationNameModules.hasOwnProperty(propKey)){
         /* è¿™é‡Œå¤šä¸ªå‡½æ•°ç®€åŒ–äº†ï¼Œå¦‚æœæ˜¯åˆæˆäº‹ä»¶ï¼Œ ä¼ å…¥æˆäº‹ä»¶åç§° onClick ï¼Œå‘documentæ³¨å†Œäº‹ä»¶  */
         legacyListenToEvent(registrationName, documentï¼‰;
    }
}
</code></pre></div><p><code>diffProperties</code>å‡½æ•°åœ¨ <code>diff props</code> å¦‚æœå‘ç°æ˜¯åˆæˆäº‹ä»¶(<code>onClick</code>) å°±ä¼šè°ƒç”¨<code>legacyListenToEvent</code>å‡½æ•°ã€‚æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ã€‚</p> <h3 id="_2-legacylistentoevent-æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨"><a href="#_2-legacylistentoevent-æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨" class="header-anchor">#</a> 2 legacyListenToEvent æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨</h3> <blockquote><p>react-dom/src/events/DOMLegacyEventPluginSystem.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>//  registrationName -&gt; onClick äº‹ä»¶
//  mountAt -&gt; document or container
function legacyListenToEvent(registrationNameï¼ŒmountAt){
   const dependencies = registrationNameDependencies[registrationName]; // æ ¹æ® onClick è·å–  onClick ä¾èµ–çš„äº‹ä»¶æ•°ç»„ [ 'click' ]ã€‚
    for (let i = 0; i &lt; dependencies.length; i++) {
    const dependency = dependencies[i];
    //è¿™ä¸ªç»è¿‡å¤šä¸ªå‡½æ•°ç®€åŒ–ï¼Œå¦‚æœæ˜¯ click åŸºç¡€äº‹ä»¶ï¼Œä¼šèµ° legacyTrapBubbledEvent ,è€Œä¸”éƒ½æ˜¯æŒ‰ç…§å†’æ³¡å¤„ç†
     legacyTrapBubbledEvent(dependency, mountAt);
  }
}
</code></pre></div><p>legacyTrapBubbledEvent å°±æ˜¯æ‰§è¡Œå°†ç»‘å®šçœŸæ­£çš„domäº‹ä»¶çš„å‡½æ•° legacyTrapBubbledEvent(å†’æ³¡å¤„ç†)ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>function legacyTrapBubbledEvent(topLevelType,element){
   addTrappedEventListener(element,topLevelType,PLUGIN_EVENT_SYSTEM,false)
}
</code></pre></div><p>ç¬¬ä¸‰æ­¥ï¼šåœ¨<code>legacyListenToEvent</code>å‡½æ•°ä¸­ï¼Œå…ˆæ‰¾åˆ° <code>React</code> åˆæˆäº‹ä»¶å¯¹åº”çš„åŸç”Ÿäº‹ä»¶é›†åˆï¼Œæ¯”å¦‚ onClick -&gt; ['click'] , onChange -&gt; [<code>blur</code> , <code>change</code> , <code>input</code> , <code>keydown</code> , <code>keyup</code>]ï¼Œç„¶åéå†ä¾èµ–é¡¹çš„æ•°ç»„ï¼Œç»‘å®šäº‹ä»¶ï¼Œ<strong>è¿™å°±è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨åˆšå¼€å§‹çš„demoä¸­ï¼Œåªç»™å…ƒç´ ç»‘å®šäº†ä¸€ä¸ª<code>onChange</code>äº‹ä»¶ï¼Œç»“æœåœ¨<code>document</code>ä¸Šå‡ºç°å¾ˆå¤šäº‹ä»¶ç›‘å¬å™¨çš„åŸå› ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªå‡½æ•°ä¸Šå¤„ç†çš„ã€‚</strong></p> <p>æˆ‘ä»¬ä¸Šé¢å·²ç»é€éœ²äº†Reactæ˜¯é‡‡ç”¨äº‹ä»¶ç»‘å®šï¼Œ<code>React</code> å¯¹äº <code>click</code> ç­‰åŸºç¡€äº‹ä»¶ï¼Œä¼šé»˜è®¤æŒ‰ç…§äº‹ä»¶å†’æ³¡é˜¶æ®µçš„äº‹ä»¶å¤„ç†ï¼Œ<strong>ä¸è¿‡è¿™ä¹Ÿä¸ç»å¯¹çš„ï¼Œæ¯”å¦‚ä¸€äº›äº‹ä»¶çš„å¤„ç†ï¼Œæœ‰äº›ç‰¹æ®Šçš„äº‹ä»¶æ˜¯æŒ‰ç…§äº‹ä»¶æ•è·å¤„ç†çš„ã€‚</strong></p> <div class="language- extra-class"><pre class="language-text"><code>case TOP_SCROLL: {                                // scroll äº‹ä»¶
    legacyTrapCapturedEvent(TOP_SCROLL, mountAt); // legacyTrapCapturedEvent äº‹ä»¶æ•è·å¤„ç†ã€‚
    break;
}
case TOP_FOCUS: // focus äº‹ä»¶
case TOP_BLUR:  // blur äº‹ä»¶
legacyTrapCapturedEvent(TOP_FOCUS, mountAt);
legacyTrapCapturedEvent(TOP_BLUR, mountAt);
break;
</code></pre></div><h3 id="_3-ç»‘å®š-dispatchevent-è¿›è¡Œäº‹ä»¶ç›‘å¬"><a href="#_3-ç»‘å®š-dispatchevent-è¿›è¡Œäº‹ä»¶ç›‘å¬" class="header-anchor">#</a> 3 ç»‘å®š dispatchEventï¼Œè¿›è¡Œäº‹ä»¶ç›‘å¬</h3> <p>å¦‚ä¸Šè¿°çš„<code>scroll</code>äº‹ä»¶ï¼Œ<code>focus</code> äº‹ä»¶ ï¼Œ<code>blur</code>äº‹ä»¶ç­‰ï¼Œæ˜¯é»˜è®¤æŒ‰ç…§äº‹ä»¶æ•è·é€»è¾‘å¤„ç†ã€‚æ¥ä¸‹æ¥å°±æ˜¯æœ€é‡è¦å…³é”®çš„ä¸€æ­¥ã€‚Reactæ˜¯å¦‚ä½•ç»‘å®šäº‹ä»¶åˆ°<code>document</code>ï¼Ÿäº‹ä»¶å¤„ç†å‡½æ•°å‡½æ•°åˆæ˜¯ä»€ä¹ˆï¼Ÿé—®é¢˜éƒ½æŒ‡å‘äº†ä¸Šè¿°çš„<code>addTrappedEventListener</code>ï¼Œè®©æˆ‘ä»¬æ¥æ­å¼€å®ƒçš„é¢çº±ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>/*
  targetContainer -&gt; document
  topLevelType -&gt;  click
  capture = false
*/
function addTrappedEventListener(targetContainer,topLevelType,eventSystemFlags,capture){
   const listener = dispatchEvent.bind(null,topLevelType,eventSystemFlags,targetContainer) 
   if(capture){
       // äº‹ä»¶æ•è·é˜¶æ®µå¤„ç†å‡½æ•°ã€‚
   }else{
       /* TODO: é‡è¦, è¿™é‡Œè¿›è¡ŒçœŸæ­£çš„äº‹ä»¶ç»‘å®šã€‚*/
      targetContainer.addEventListener(topLevelType,listener,false) // document.addEventListener('click',listener,false)
   }
}
</code></pre></div><p>ç¬¬å››æ­¥ï¼šè¿™ä¸ªå‡½æ•°å†…å®¹è™½ç„¶ä¸å¤šï¼Œä½†æ˜¯å´éå¸¸é‡è¦,é¦–å…ˆç»‘å®šæˆ‘ä»¬çš„äº‹ä»¶ç»Ÿä¸€å¤„ç†å‡½æ•° <code>dispatchEvent</code>ï¼Œç»‘å®šå‡ ä¸ªé»˜è®¤å‚æ•°ï¼Œäº‹ä»¶ç±»å‹ <code>topLevelType</code> demoä¸­çš„<code>click</code> ï¼Œè¿˜æœ‰ç»‘å®šçš„å®¹å™¨<code>doucment</code>ã€‚<strong>ç„¶åçœŸæ­£çš„äº‹ä»¶ç»‘å®š,æ·»åŠ äº‹ä»¶ç›‘å¬å™¨<code>addEventListener</code>ã€‚</strong> äº‹ä»¶ç»‘å®šé˜¶æ®µå®Œæ¯•ã€‚</p> <h3 id="_4-äº‹ä»¶ç»‘å®šè¿‡ç¨‹æ€»ç»“"><a href="#_4-äº‹ä»¶ç»‘å®šè¿‡ç¨‹æ€»ç»“" class="header-anchor">#</a> 4 äº‹ä»¶ç»‘å®šè¿‡ç¨‹æ€»ç»“</h3> <p>æˆ‘ä»¬æ¥åšä¸€ä¸‹äº‹ä»¶ç»‘å®šé˜¶æ®µçš„æ€»ç»“ã€‚</p> <ul><li>â‘  åœ¨Reactï¼Œdiff DOMå…ƒç´ ç±»å‹çš„fiberçš„propsçš„æ—¶å€™ï¼Œ å¦‚æœå‘ç°æ˜¯Reactåˆæˆäº‹ä»¶ï¼Œæ¯”å¦‚<code>onClick</code>ï¼Œä¼šæŒ‰ç…§äº‹ä»¶ç³»ç»Ÿé€»è¾‘å•ç‹¬å¤„ç†ã€‚</li> <li>â‘¡ æ ¹æ®Reactåˆæˆäº‹ä»¶ç±»å‹ï¼Œæ‰¾åˆ°å¯¹åº”çš„åŸç”Ÿäº‹ä»¶çš„ç±»å‹ï¼Œç„¶åè°ƒç”¨åˆ¤æ–­åŸç”Ÿäº‹ä»¶ç±»å‹ï¼Œå¤§éƒ¨åˆ†äº‹ä»¶éƒ½æŒ‰ç…§å†’æ³¡é€»è¾‘å¤„ç†ï¼Œå°‘æ•°äº‹ä»¶ä¼šæŒ‰ç…§æ•è·é€»è¾‘å¤„ç†ï¼ˆæ¯”å¦‚<code>scroll</code>äº‹ä»¶ï¼‰ã€‚</li> <li>â‘¢ è°ƒç”¨ addTrappedEventListener è¿›è¡ŒçœŸæ­£çš„äº‹ä»¶ç»‘å®šï¼Œç»‘å®šåœ¨<code>document</code>ä¸Šï¼Œ<code>dispatchEvent</code> ä¸ºç»Ÿä¸€çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li> <li>â‘£ <strong>æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„: åªæœ‰ä¸Šè¿°é‚£å‡ ä¸ªç‰¹æ®Šäº‹ä»¶æ¯”å¦‚ <code>scorll</code>,<code>focus</code>,<code>blur</code>ç­‰æ˜¯åœ¨äº‹ä»¶æ•è·é˜¶æ®µå‘ç”Ÿçš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯åœ¨äº‹ä»¶å†’æ³¡é˜¶æ®µå‘ç”Ÿçš„ï¼Œæ— è®ºæ˜¯<code>onClick</code>è¿˜æ˜¯<code>onClickCapture</code>éƒ½æ˜¯å‘ç”Ÿåœ¨å†’æ³¡é˜¶æ®µ</strong>ï¼Œè‡³äº React æœ¬èº«æ€ä¹ˆå¤„ç†æ•è·é€»è¾‘çš„ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°ã€‚</li></ul> <h1 id="å››-äº‹ä»¶è§¦å‘-ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶-åœ¨reactåº•å±‚ç³»ç»Ÿä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#å››-äº‹ä»¶è§¦å‘-ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶-åœ¨reactåº•å±‚ç³»ç»Ÿä¼šå‘ç”Ÿä»€ä¹ˆ" class="header-anchor">#</a> å›› äº‹ä»¶è§¦å‘-ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨<code>react</code>åº•å±‚ç³»ç»Ÿä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h1> <div class="language- extra-class"><pre class="language-text"><code>&lt;div&gt;
  &lt;button onClick={ this.handerClick }  className=&quot;button&quot; &gt;ç‚¹å‡»&lt;/button&gt;
&lt;/div&gt;
</code></pre></div><p>è¿˜æ˜¯ä¸Šé¢è¿™æ®µä»£ç ç‰‡æ®µï¼Œå½“ç‚¹å‡»ä¸€ä¸‹æŒ‰é’®ï¼Œåœ¨ <code>React</code> åº•å±‚ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œè®©æˆ‘å…±åŒæ¢ç´¢äº‹ä»¶è§¦å‘çš„å¥¥ç§˜ã€‚</p> <h2 id="äº‹ä»¶è§¦å‘å¤„ç†å‡½æ•°-dispatchevent"><a href="#äº‹ä»¶è§¦å‘å¤„ç†å‡½æ•°-dispatchevent" class="header-anchor">#</a> äº‹ä»¶è§¦å‘å¤„ç†å‡½æ•° dispatchEvent</h2> <p>æˆ‘ä»¬åœ¨äº‹ä»¶ç»‘å®šé˜¶æ®µè®²è¿‡ï¼ŒReactäº‹ä»¶æ³¨å†Œæ—¶å€™ï¼Œç»Ÿä¸€çš„ç›‘å¬å™¨<code>dispatchEvent</code>ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬<strong>ç‚¹å‡»æŒ‰é’®ä¹‹åï¼Œé¦–å…ˆæ‰§è¡Œçš„æ˜¯<code>dispatchEvent</code>å‡½æ•°</strong>ï¼Œå› ä¸º<code>dispatchEvent</code>å‰ä¸‰ä¸ªå‚æ•°å·²ç»è¢«bindäº†è¿›å»ï¼Œæ‰€ä»¥çœŸæ­£çš„äº‹ä»¶æºå¯¹è±¡<code>event</code>ï¼Œè¢«é»˜è®¤ç»‘å®šæˆç¬¬å››ä¸ªå‚æ•°ã€‚</p> <blockquote><p>react-dom/src/events/ReactDOMEventListener.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function dispatchEvent(topLevelType,eventSystemFlags,targetContainer,nativeEvent){
    /* å°è¯•è°ƒåº¦äº‹ä»¶ */
    const blockedOn = attemptToDispatchEvent( topLevelType,eventSystemFlags, targetContainer, nativeEvent);
}
/*
topLevelType -&gt; click
eventSystemFlags -&gt; 1
targetContainer -&gt; document
nativeEvent -&gt; åŸç”Ÿäº‹ä»¶çš„ event å¯¹è±¡
*/
function attemptToDispatchEvent(topLevelType,eventSystemFlags,targetContainer,nativeEvent){
    /* è·å–åŸç”Ÿäº‹ä»¶ e.target */
    const nativeEventTarget = getEventTarget(nativeEvent)
    /* è·å–å½“å‰äº‹ä»¶ï¼Œæœ€è¿‘çš„domç±»å‹fiber ï¼Œæˆ‘ä»¬ demoä¸­ button æŒ‰é’®å¯¹åº”çš„ fiber */
    let targetInst = getClosestInstanceFromNode(nativeEventTarget); 
    /* é‡è¦ï¼šè¿›å…¥legacyæ¨¡å¼çš„äº‹ä»¶å¤„ç†ç³»ç»Ÿ */
    dispatchEventForLegacyPluginEventSystem(topLevelType,eventSystemFlags,nativeEvent,targetInst,);
    return null;
}
</code></pre></div><p>åœ¨è¿™ä¸ªé˜¶æ®µä¸»è¦åšäº†è¿™å‡ ä»¶äº‹ï¼š</p> <ul><li>â‘  é¦–å…ˆæ ¹æ®çœŸå®çš„äº‹ä»¶æºå¯¹è±¡ï¼Œæ‰¾åˆ° <code>e.target</code> çœŸå®çš„ <code>dom</code> å…ƒç´ ã€‚</li> <li>â‘¡ ç„¶åæ ¹æ®<code>dom</code>å…ƒç´ ï¼Œæ‰¾åˆ°ä¸å®ƒå¯¹åº”çš„ <code>fiber</code> å¯¹è±¡<code>targetInst</code>ï¼Œåœ¨æˆ‘ä»¬ <code>demo</code> ä¸­ï¼Œæ‰¾åˆ° <code>button</code> æŒ‰é’®å¯¹åº”çš„ <code>fiber</code>ã€‚</li> <li>â‘¢ ç„¶åæ­£å¼è¿›å»<code>legacy</code>æ¨¡å¼çš„äº‹ä»¶å¤„ç†ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç›®å‰ç”¨çš„Reactæ¨¡å¼éƒ½æ˜¯<code>legacy</code>æ¨¡å¼ä¸‹çš„ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œæ‰¹é‡æ›´æ–°åŸç†ï¼Œå³å°†æ‹‰å¼€å¸·å¹•ã€‚</li></ul> <p>è¿™é‡Œæœ‰ä¸€ç‚¹é—®é¢˜ï¼Œ<strong><code>React</code>æ€ä¹ˆæ ·é€šè¿‡åŸç”Ÿçš„<code>dom</code>å…ƒç´ ï¼Œæ‰¾åˆ°å¯¹åº”çš„<code>fiber</code>çš„å‘¢ï¼Ÿ</strong> ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>getClosestInstanceFromNode</code> åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p> <p>ç­”æ¡ˆæ˜¯é¦–å…ˆ <code>getClosestInstanceFromNode</code> å¯ä»¥æ‰¾åˆ°å½“å‰ä¼ å…¥çš„ <code>dom</code> å¯¹åº”çš„æœ€è¿‘çš„å…ƒç´ ç±»å‹çš„ <code>fiber</code> å¯¹è±¡ã€‚<code>React</code> åœ¨åˆå§‹åŒ–çœŸå® <code>dom</code> çš„æ—¶å€™ï¼Œç”¨ä¸€ä¸ªéšæœºçš„ <code>key internalInstanceKey</code> æŒ‡é’ˆæŒ‡å‘äº†å½“å‰<code>dom</code>å¯¹åº”çš„<code>fiber</code>å¯¹è±¡ï¼Œ<code>fiber</code>å¯¹è±¡ç”¨<code>stateNode</code>æŒ‡å‘äº†å½“å‰çš„<code>dom</code>å…ƒç´ ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// å£°æ˜éšæœºkey
var internalInstanceKey = '__reactInternalInstance$' + randomKey;

// ä½¿ç”¨éšæœºkey 
function getClosestInstanceFromNode(targetNode){
  // targetNode -dom  targetInst -&gt; ä¸ä¹‹å¯¹åº”çš„fiberå¯¹è±¡
  var targetInst = targetNode[internalInstanceKey];
}
</code></pre></div><p><strong>åœ¨è°·æ­Œè°ƒè¯•å™¨ä¸Šçœ‹</strong></p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">fiber_dom.jpg</p> <p><strong>ä¸¤è€…å…³ç³»å›¾</strong></p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">dom_fiber.jpg</p> <h2 id="legacy-äº‹ä»¶å¤„ç†ç³»ç»Ÿä¸æ‰¹é‡æ›´æ–°"><a href="#legacy-äº‹ä»¶å¤„ç†ç³»ç»Ÿä¸æ‰¹é‡æ›´æ–°" class="header-anchor">#</a> legacy äº‹ä»¶å¤„ç†ç³»ç»Ÿä¸æ‰¹é‡æ›´æ–°</h2> <blockquote><p>react-dom/src/events/DOMLegacyEventPluginSystem.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>/* topLevelType - clickäº‹ä»¶ ï½œ eventSystemFlags = 1 ï½œ nativeEvent = äº‹ä»¶æºå¯¹è±¡  ï½œ targetInst = å…ƒç´ å¯¹åº”çš„fiberå¯¹è±¡  */
function dispatchEventForLegacyPluginEventSystem(topLevelType,eventSystemFlags,nativeEvent,targetInst){
    /* ä»React äº‹ä»¶æ± ä¸­å–å‡ºä¸€ä¸ªï¼Œå°† topLevelType ï¼ŒtargetInst ç­‰å±æ€§èµ‹äºˆç»™äº‹ä»¶  */
    const bookKeeping = getTopLevelCallbackBookKeeping(topLevelType,nativeEvent,targetInst,eventSystemFlags);
    try { /* æ‰§è¡Œæ‰¹é‡æ›´æ–° handleTopLevel ä¸ºäº‹ä»¶å¤„ç†çš„ä¸»è¦å‡½æ•° */
    batchedEventUpdates(handleTopLevel, bookKeeping);
  } finally {
    /* é‡Šæ”¾äº‹ä»¶æ±  */  
    releaseTopLevelCallbackBookKeeping(bookKeeping);
  }
}
</code></pre></div><p>å¯¹äºv16äº‹ä»¶æ± ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°ï¼Œé¦–å…ˆ <code>batchedEventUpdates</code>ä¸ºæ‰¹é‡æ›´æ–°çš„ä¸»è¦å‡½æ•°ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<code>batchedEventUpdates</code></p> <blockquote><p>react-dom/src/events/ReactDOMUpdateBatching.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>export function batchedEventUpdates(fn,a){
    isBatchingEventUpdates = true;
    try{
       fn(a) // handleTopLevel(bookKeeping)
    }finally{
        isBatchingEventUpdates = false
    }
}
</code></pre></div><p>æ‰¹é‡æ›´æ–°ç®€åŒ–æˆå¦‚ä¸Šçš„æ ·å­ï¼Œä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒReacté€šè¿‡å¼€å…³<code>isBatchingEventUpdates</code>æ¥æ§åˆ¶æ˜¯å¦å¯ç”¨æ‰¹é‡æ›´æ–°ã€‚<code>fn(a)</code>ï¼Œäº‹ä»¶ä¸Šè°ƒç”¨çš„æ˜¯ <code>handleTopLevel(bookKeeping)</code>ï¼Œç”±äºjsæ˜¯å•çº¿ç¨‹çš„ï¼Œæˆ‘ä»¬çœŸæ­£åœ¨ç»„ä»¶ä¸­å†™çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ¯”å¦‚demo çš„ <code>handerClick</code>å®é™…æ‰§è¡Œæ˜¯åœ¨<code>handleTopLevel(bookKeeping)</code>ä¸­æ‰§è¡Œçš„ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬åœ¨<code>handerClick</code>é‡Œé¢è§¦å‘<code>setState</code>ï¼Œé‚£ä¹ˆå°±èƒ½è¯»å–åˆ°<code>isBatchingEventUpdates = true</code>è¿™å°±æ˜¯Reactçš„åˆæˆäº‹ä»¶ä¸ºä»€ä¹ˆå…·æœ‰æ‰¹é‡æ›´æ–°çš„åŠŸèƒ½äº†ã€‚æ¯”å¦‚æˆ‘ä»¬è¿™ä¹ˆå†™</p> <div class="language- extra-class"><pre class="language-text"><code>state={number:0}
handerClick = () =&gt;{
    this.setState({number: this.state.number + 1   })
    console.log(this.state.number) //0
    this.setState({number: this.state.number + 1   })
    console.log(this.state.number) //0
    setTimeout(()=&gt;{
        this.setState({number: this.state.number + 1   })
        console.log(this.state.number) //2
        this.setState({number: this.state.number + 1   })
        console.log(this.state.number)// 3
    })
}
</code></pre></div><p>å¦‚ä¸Šè¿°æ‰€ç¤ºï¼Œç¬¬ä¸€ä¸ª<code>setState</code>å’Œç¬¬äºŒä¸ª<code>setState</code>åœ¨æ‰¹é‡æ›´æ–°æ¡ä»¶ä¹‹å†…æ‰§è¡Œï¼Œæ‰€ä»¥æ‰“å°ä¸ä¼šæ˜¯æœ€æ–°çš„å€¼ï¼Œä½†æ˜¯å¦‚æœæ˜¯å‘ç”Ÿåœ¨<code>setTimeout</code>ä¸­,ç”±äºeventLoop æ”¾åœ¨äº†ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œï¼Œæ­¤æ—¶ batchedEventUpdates ä¸­å·²ç»æ‰§è¡Œå®Œ<code>isBatchingEventUpdates = false</code>ï¼Œæ‰€ä»¥æ‰¹é‡æ›´æ–°è¢«æ‰“ç ´ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¿é—®åˆ°æœ€æ–°å˜åŒ–çš„å€¼äº†ã€‚</p> <p>æ¥ä¸‹æ¥æˆ‘ä»¬æœ‰ä¸¤ç‚¹æ²¡æœ‰æ¢³ç†ï¼š</p> <ul><li>ä¸€æ˜¯Reactäº‹ä»¶æ± æ¦‚å¿µ</li> <li>äºŒæ˜¯æœ€åçš„çº¿ç´¢æ˜¯æ‰§è¡Œ<code>handleTopLevel(bookKeeping)</code>ï¼Œé‚£ä¹ˆ<code>handleTopLevel</code>åˆ°åº•åšäº†å†™ä»€ä¹ˆã€‚</li></ul> <h2 id="æ‰§è¡Œäº‹ä»¶æ’ä»¶å‡½æ•°"><a href="#æ‰§è¡Œäº‹ä»¶æ’ä»¶å‡½æ•°" class="header-anchor">#</a> æ‰§è¡Œäº‹ä»¶æ’ä»¶å‡½æ•°</h2> <p>ä¸Šé¢è¯´åˆ°æ•´ä¸ªäº‹ä»¶ç³»ç»Ÿï¼Œæœ€åæŒ‡å‘å‡½æ•° <code>handleTopLevel(bookKeeping)</code> é‚£ä¹ˆ <code>handleTopLevel</code> åˆ°åº•åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>// æµç¨‹ç®€åŒ–å
// topLevelType - click  
// targetInst - button Fiber
// nativeEvent
function handleTopLevel(bookKeeping){
    const { topLevelType,targetInst,nativeEvent,eventTarget, eventSystemFlags} = bookKeeping
    for(let i=0; i &lt; plugins.length;i++ ){
        const possiblePlugin = plugins[i];
        /* æ‰¾åˆ°å¯¹åº”çš„äº‹ä»¶æ’ä»¶ï¼Œå½¢æˆå¯¹åº”çš„åˆæˆeventï¼Œå½¢æˆäº‹ä»¶æ‰§è¡Œé˜Ÿåˆ—  */
        const  extractedEvents = possiblePlugin.extractEvents(topLevelType,targetInst,nativeEvent,eventTarget,eventSystemFlags)  
    }
    if (extractedEvents) {
        events = accumulateInto(events, extractedEvents);
    }
    /* æ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•° */
    runEventsInBatch(events);
}
</code></pre></div><p>æˆ‘æŠŠæ•´ä¸ªæµç¨‹ç®€åŒ–ï¼Œåªä¿ç•™äº†æ ¸å¿ƒçš„æµç¨‹ï¼Œ<code>handleTopLevel</code>æœ€åçš„å¤„ç†é€»è¾‘å°±æ˜¯æ‰§è¡Œæˆ‘ä»¬è¯´çš„äº‹ä»¶å¤„ç†æ’ä»¶(SimpleEventPlugin)ä¸­çš„å¤„ç†å‡½æ•°<code>extractEvents</code>ï¼Œæ¯”å¦‚æˆ‘ä»¬demoä¸­çš„ç‚¹å‡»äº‹ä»¶ onClick æœ€ç»ˆèµ°çš„å°±æ˜¯ <code>SimpleEventPlugin</code> ä¸­çš„ <code>extractEvents</code> å‡½æ•°ï¼Œé‚£ä¹ˆReactä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢? æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬Reactæ˜¯é‡‡å–äº‹ä»¶åˆæˆï¼Œäº‹ä»¶ç»Ÿä¸€ç»‘å®šï¼Œå¹¶ä¸”æˆ‘ä»¬å†™åœ¨ç»„ä»¶ä¸­çš„äº‹ä»¶å¤„ç†å‡½æ•°( handerClick )ï¼Œä¹Ÿä¸æ˜¯çœŸæ­£çš„æ‰§è¡Œå‡½æ•°<code>dispatchAciton</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨<code>handerClick</code>çš„äº‹ä»¶å¯¹è±¡ <code>event</code>,ä¹Ÿæ˜¯Reactå•ç‹¬åˆæˆå¤„ç†çš„ï¼Œé‡Œé¢å•ç‹¬å°è£…äº†æ¯”å¦‚ <code>stopPropagation</code>å’Œ<code>preventDefault</code>ç­‰æ–¹æ³•ï¼Œ<strong>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦è·¨æµè§ˆå™¨å•ç‹¬å¤„ç†å…¼å®¹é—®é¢˜ï¼Œäº¤ç»™Reactåº•å±‚ç»Ÿä¸€å¤„ç†ã€‚</strong></p> <h2 id="extractevents-å½¢æˆäº‹ä»¶å¯¹è±¡event-å’Œ-äº‹ä»¶å¤„ç†å‡½æ•°é˜Ÿåˆ—"><a href="#extractevents-å½¢æˆäº‹ä»¶å¯¹è±¡event-å’Œ-äº‹ä»¶å¤„ç†å‡½æ•°é˜Ÿåˆ—" class="header-anchor">#</a> extractEvents å½¢æˆäº‹ä»¶å¯¹è±¡event å’Œ äº‹ä»¶å¤„ç†å‡½æ•°é˜Ÿåˆ—</h2> <p><strong>é‡ç‚¹æ¥äº†ï¼é‡ç‚¹æ¥äº†ï¼é‡ç‚¹æ¥äº†ï¼</strong>ï¼ŒextractEvents å¯ä»¥ä½œä¸ºæ•´ä¸ªäº‹ä»¶ç³»ç»Ÿæ ¸å¿ƒå‡½æ•°ï¼Œæˆ‘ä»¬å…ˆå›åˆ°æœ€åˆçš„<code>demo</code>ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¹ˆå†™,é‚£ä¹ˆå››ä¸ªå›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆç‚¹å‡»æŒ‰é’®ï¼Œå››ä¸ªäº‹ä»¶æ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ã€‚é¦–å…ˆå¦‚æœç‚¹å‡»æŒ‰é’®ï¼Œæœ€ç»ˆèµ°çš„å°±æ˜¯<code>extractEvents</code>å‡½æ•°ï¼Œä¸€æ¢ç©¶ç«Ÿè¿™ä¸ªå‡½æ•°ã€‚</p> <blockquote><p>legacy-events/SyntheticEvent.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>const  SimpleEventPlugin = {
    extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){
        const dispatchConfig = topLevelEventsToDispatchConfig.get(topLevelType);
        if (!dispatchConfig) {
            return null;
        }
        switch(topLevelType){
            default:
            EventConstructor = SyntheticEvent;
            break;
        }
        /* äº§ç”Ÿäº‹ä»¶æºå¯¹è±¡ */
        const event = EventConstructor.getPooled(dispatchConfig,targetInst,nativeEvent,nativeEventTarget)
        const phasedRegistrationNames = event.dispatchConfig.phasedRegistrationNames;
        const dispatchListeners = [];
        const {bubbled, captured} = phasedRegistrationNames; /* onClick / onClickCapture */
        const dispatchInstances = [];
        /* ä»äº‹ä»¶æºå¼€å§‹é€æ¸å‘ä¸Šï¼ŒæŸ¥æ‰¾domå…ƒç´ ç±»å‹HostComponentå¯¹åº”çš„fiber ï¼Œæ”¶é›†ä¸Šé¢çš„Reactåˆæˆäº‹ä»¶ï¼ŒonClick / onClickCapture  */
         while (instance !== null) {
              const {stateNode, tag} = instance;
              if (tag === HostComponent &amp;&amp; stateNode !== null) { /* DOM å…ƒç´  */
                   const currentTarget = stateNode;
                   if (captured !== null) { /* äº‹ä»¶æ•è· */
                        /* åœ¨äº‹ä»¶æ•è·é˜¶æ®µ,çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•° */
                        const captureListener = getListener(instance, captured);
                        if (captureListener != null) {
                        /* å¯¹åº”å‘ç”Ÿåœ¨äº‹ä»¶æ•è·é˜¶æ®µçš„å¤„ç†å‡½æ•°ï¼Œé€»è¾‘æ˜¯å°†æ‰§è¡Œå‡½æ•°unshiftæ·»åŠ åˆ°é˜Ÿåˆ—çš„æœ€å‰é¢ */
                            dispatchListeners.unshift(captureListener);
                            dispatchInstances.unshift(instance);
                            dispatchCurrentTargets.unshift(currentTarget);
                        }
                    }
                    if (bubbled !== null) { /* äº‹ä»¶å†’æ³¡ */
                        /* äº‹ä»¶å†’æ³¡é˜¶æ®µï¼ŒçœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œé€»è¾‘æ˜¯å°†æ‰§è¡Œå‡½æ•°pushåˆ°æ‰§è¡Œé˜Ÿåˆ—çš„æœ€åé¢ */
                        const bubbleListener = getListener(instance, bubbled);
                        if (bubbleListener != null) {
                            dispatchListeners.push(bubbleListener);
                            dispatchInstances.push(instance);
                            dispatchCurrentTargets.push(currentTarget);
                        }
                    }
              }
              instance = instance.return;
         }
          if (dispatchListeners.length &gt; 0) {
              /* å°†å‡½æ•°æ‰§è¡Œé˜Ÿåˆ—ï¼ŒæŒ‚åˆ°äº‹ä»¶å¯¹è±¡eventä¸Š */
            event._dispatchListeners = dispatchListeners;
            event._dispatchInstances = dispatchInstances;
            event._dispatchCurrentTargets = dispatchCurrentTargets;
         }
        return event
    }
}
</code></pre></div><p>äº‹ä»¶æ’ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒ<code>extractEvents</code>ä¸»è¦åšçš„äº‹æ˜¯:</p> <ul><li>â‘  é¦–å…ˆå½¢æˆ<code>React</code>äº‹ä»¶ç‹¬æœ‰çš„åˆæˆäº‹ä»¶æºå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ï¼Œä¿å­˜äº†æ•´ä¸ªäº‹ä»¶çš„ä¿¡æ¯ã€‚å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°(handerClick)ã€‚</li> <li>â‘¡ ç„¶åå£°æ˜äº‹ä»¶æ‰§è¡Œé˜Ÿåˆ— ï¼ŒæŒ‰ç…§<code>å†’æ³¡</code>å’Œ<code>æ•è·</code>é€»è¾‘ï¼Œä»äº‹ä»¶æºå¼€å§‹é€æ¸å‘ä¸Šï¼ŒæŸ¥æ‰¾domå…ƒç´ ç±»å‹HostComponentå¯¹åº”çš„fiber ï¼Œæ”¶é›†ä¸Šé¢çš„ <code>React</code> åˆæˆäº‹ä»¶ï¼Œä¾‹å¦‚ <code>onClick</code> / <code>onClickCapture</code> ï¼Œå¯¹äºå†’æ³¡é˜¶æ®µçš„äº‹ä»¶(<code>onClick</code>)ï¼Œå°† <code>push</code> åˆ°æ‰§è¡Œé˜Ÿåˆ—åé¢ ï¼Œ å¯¹äºæ•è·é˜¶æ®µçš„äº‹ä»¶(<code>onClickCapture</code>)ï¼Œå°† <code>unShift</code>åˆ°æ‰§è¡Œé˜Ÿåˆ—çš„å‰é¢ã€‚</li> <li>â‘¢ æœ€åå°†äº‹ä»¶æ‰§è¡Œé˜Ÿåˆ—ï¼Œä¿å­˜åˆ°Reactäº‹ä»¶æºå¯¹è±¡ä¸Šã€‚ç­‰å¾…æ‰§è¡Œã€‚</li></ul> <p>ä¸¾ä¸ªä¾‹å­æ¯”å¦‚å¦‚ä¸‹</p> <div class="language- extra-class"><pre class="language-text"><code>handerClick = () =&gt; console.log(1)
handerClick1 = () =&gt; console.log(2)
handerClick2 = () =&gt; console.log(3) 
handerClick3= () =&gt; console.log(4)
render(){
    return &lt;div onClick={ this.handerClick2 } onClickCapture={this.handerClick3}  &gt; 
        &lt;button onClick={ this.handerClick }  onClickCapture={ this.handerClick1  }  className=&quot;button&quot; &gt;ç‚¹å‡»&lt;/button&gt;
    &lt;/div&gt;
}
</code></pre></div><p>æ‰“å° // 4  2  1  3</p> <p>çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬åº”è¯¥çŸ¥é“ä¸Šè¿°å‡½æ•°æ‰“å°é¡ºåºä¸ºä»€ä¹ˆäº†å§ï¼Œé¦–å…ˆéå† <code>button</code> å¯¹åº”çš„fiberï¼Œé¦–å…ˆé‡åˆ°äº† <code>onClickCapture</code> ,å°† <code>handerClick1</code> æ”¾åˆ°äº†æ•°ç»„æœ€å‰é¢ï¼Œç„¶ååˆæŠŠ<code>onClick</code>å¯¹åº”<code>handerClick</code>çš„æ”¾åˆ°æ•°ç»„çš„æœ€åé¢ï¼Œå½¢æˆçš„ç»“æ„æ˜¯<code>[ handerClick1 , handerClick ]</code>ï¼Œ ç„¶åå‘ä¸Šéå†ï¼Œé‡åˆ°äº†<code>div</code>å¯¹åº”fiber,å°†<code>onClickCapture</code>å¯¹åº”çš„<code>handerClick3</code>æ”¾åœ¨äº†æ•°ç»„å‰é¢ï¼Œå°†<code>onClick</code>å¯¹åº”çš„ <code>handerClick2</code> æ”¾åœ¨äº†æ•°ç»„åé¢ï¼Œå½¢æˆçš„ç»“æ„ <code>[ handerClick3,handerClick1 , handerClick,handerClick2 ]</code> ,æ‰€ä»¥æ‰§è¡Œçš„é¡ºåº // 4  2  1  3ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå®Œç¾ï¼</p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">FDEBA681-2E03-420B-A838-5907439837A9.jpg</p> <h2 id="äº‹ä»¶è§¦å‘"><a href="#äº‹ä»¶è§¦å‘" class="header-anchor">#</a> äº‹ä»¶è§¦å‘</h2> <p>æœ‰çš„åŒå­¦å¯èƒ½å¥½å¥‡Reactçš„äº‹ä»¶æºå¯¹è±¡æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»¥ä¸Šé¢ä»£ç ä¸­<code>SyntheticEvent</code>ä¸ºä¾‹å­æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼š</p> <blockquote><p>legacy-events/SyntheticEvent.js/</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function SyntheticEvent( dispatchConfig,targetInst,nativeEvent,nativeEventTarget){
  this.dispatchConfig = dispatchConfig;
  this._targetInst = targetInst;
  this.nativeEvent = nativeEvent;
  this._dispatchListeners = null;
  this._dispatchInstances = null;
  this._dispatchCurrentTargets = null;
  this.isPropagationStopped = () =&gt; false; /* åˆå§‹åŒ–ï¼Œè¿”å›ä¸ºfalse  */

}
SyntheticEvent.prototype={
    stopPropagation(){ this.isPropagationStopped = () =&gt; true;  }, /* Reactå•ç‹¬å¤„ç†ï¼Œé˜»æ­¢äº‹ä»¶å†’æ³¡å‡½æ•° */
    preventDefault(){ },  /* Reactå•ç‹¬å¤„ç†ï¼Œé˜»æ­¢äº‹ä»¶æ•è·å‡½æ•°  */
    ...
}
</code></pre></div><p>åœ¨ <code>handerClick</code> ä¸­æ‰“å° <code>e</code> :</p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">B9180401-93FF-4EF0-A2FB-C2FA43B29550.jpg</p> <p>æ—¢ç„¶äº‹ä»¶æ‰§è¡Œé˜Ÿåˆ—å’Œäº‹ä»¶æºå¯¹è±¡éƒ½å½¢æˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æœ€åä¸€æ­¥<strong>äº‹ä»¶è§¦å‘</strong>äº†ã€‚ä¸Šé¢å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•°<code>runEventsInBatch</code>ï¼Œæ‰€æœ‰äº‹ä»¶ç»‘å®šå‡½æ•°ï¼Œå°±æ˜¯åœ¨è¿™é‡Œè§¦å‘çš„ã€‚è®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ã€‚</p> <blockquote><p>legacy-events/EventBatching.js</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function runEventsInBatch(){
    const dispatchListeners = event._dispatchListeners;
    const dispatchInstances = event._dispatchInstances;
    if (Array.isArray(dispatchListeners)) {
    for (let i = 0; i &lt; dispatchListeners.length; i++) {
      if (event.isPropagationStopped()) { /* åˆ¤æ–­æ˜¯å¦å·²ç»é˜»æ­¢äº‹ä»¶å†’æ³¡ */
        break;
      }
      
      dispatchListeners[i](event)
    }
  }
  /* æ‰§è¡Œå®Œå‡½æ•°ï¼Œç½®ç©ºä¸¤å­—æ®µ */
  event._dispatchListeners = null;
  event._dispatchInstances = null;
}
</code></pre></div><p><code>dispatchListeners[i](event)</code>å°±æ˜¯æ‰§è¡Œæˆ‘ä»¬çš„äº‹ä»¶å¤„ç†å‡½æ•°æ¯”å¦‚<code>handerClick</code>,ä»è¿™é‡Œæˆ‘ä»¬çŸ¥é“ï¼Œ<strong>æˆ‘ä»¬åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œè¿”å› false ï¼Œå¹¶ä¸ä¼šé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º</strong>ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>handerClick(){ //å¹¶ä¸èƒ½é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸ºã€‚
    return false
}
</code></pre></div><p>åº”è¯¥æ”¹æˆè¿™æ ·ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>handerClick(e){
    e.preventDefault()
}
</code></pre></div><p>å¦ä¸€æ–¹é¢Reactå¯¹äºé˜»æ­¢å†’æ³¡ï¼Œå°±æ˜¯é€šè¿‡isPropagationStoppedï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»é˜»æ­¢äº‹ä»¶å†’æ³¡ã€‚å¦‚æœæˆ‘ä»¬åœ¨äº‹ä»¶å‡½æ•°æ‰§è¡Œé˜Ÿåˆ—ä¸­ï¼ŒæŸä¸€ä¼šå‡½æ•°ä¸­ï¼Œè°ƒç”¨<code>e.stopPropagation()</code>ï¼Œå°±ä¼šèµ‹å€¼ç»™<code>isPropagationStopped=()=&gt;true</code>ï¼Œå½“å†æ‰§è¡Œ <code>e.isPropagationStopped()</code>å°±ä¼šè¿”å› <code>true</code> ,æ¥ä¸‹æ¥äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå°±ä¸ä¼šæ‰§è¡Œäº†ã€‚</p> <h2 id="å…¶ä»–æ¦‚å¿µ-äº‹ä»¶æ± "><a href="#å…¶ä»–æ¦‚å¿µ-äº‹ä»¶æ± " class="header-anchor">#</a> å…¶ä»–æ¦‚å¿µ-äº‹ä»¶æ± </h2> <div class="language- extra-class"><pre class="language-text"><code> handerClick = (e) =&gt; {
    console.log(e.target) // button 
    setTimeout(()=&gt;{
        console.log(e.target) // null
    },0)
}
</code></pre></div><p>å¯¹äºä¸€æ¬¡ç‚¹å‡»äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œåœ¨æ­£å¸¸çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æ‰“å°<code>e.target</code>å°±æŒ‡å‘äº†<code>dom</code>å…ƒç´ ï¼Œä½†æ˜¯åœ¨<code>setTimeout</code>ä¸­æ‰“å°å´æ˜¯<code>null</code>ï¼Œå¦‚æœè¿™ä¸æ˜¯Reactäº‹ä»¶ç³»ç»Ÿï¼Œä¸¤æ¬¡æ‰“å°çš„åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¸¤æ¬¡æ‰“å°ä¸ä¸€æ ·å‘¢ï¼Ÿ<strong>å› ä¸ºåœ¨Reacté‡‡å–äº†ä¸€ä¸ªäº‹ä»¶æ± çš„æ¦‚å¿µï¼Œæ¯æ¬¡æˆ‘ä»¬ç”¨çš„äº‹ä»¶æºå¯¹è±¡ï¼Œåœ¨äº‹ä»¶å‡½æ•°æ‰§è¡Œä¹‹åï¼Œå¯ä»¥é€šè¿‡<code>releaseTopLevelCallbackBookKeeping</code>ç­‰æ–¹æ³•å°†äº‹ä»¶æºå¯¹è±¡é‡Šæ”¾åˆ°äº‹ä»¶æ± ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„æ¯æ¬¡æˆ‘ä»¬ä¸å¿…å†åˆ›å»ºäº‹ä»¶æºå¯¹è±¡ï¼Œå¯ä»¥ä»äº‹ä»¶æ± ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶æºå¯¹è±¡è¿›è¡Œå¤ç”¨ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæ¯•å,ä¼šé‡Šæ”¾äº‹ä»¶æºåˆ°äº‹ä»¶æ± ä¸­ï¼Œæ¸…ç©ºå±æ€§ï¼Œè¿™å°±æ˜¯<code>setTimeout</code>ä¸­æ‰“å°ä¸ºä»€ä¹ˆæ˜¯<code>null</code>çš„åŸå› äº†ã€‚</strong></p> <h2 id="äº‹ä»¶è§¦å‘æ€»ç»“"><a href="#äº‹ä»¶è§¦å‘æ€»ç»“" class="header-anchor">#</a> äº‹ä»¶è§¦å‘æ€»ç»“</h2> <p>æˆ‘æŠŠäº‹ä»¶è§¦å‘é˜¶æ®µåšçš„äº‹æ€»ç»“ä¸€ä¸‹ï¼š</p> <ul><li><strong>â‘ é¦–å…ˆé€šè¿‡ç»Ÿä¸€çš„äº‹ä»¶å¤„ç†å‡½æ•° <code>dispatchEvent</code>,è¿›è¡Œæ‰¹é‡æ›´æ–°batchUpdateã€‚</strong></li> <li><strong>â‘¡ç„¶åæ‰§è¡Œäº‹ä»¶å¯¹åº”çš„å¤„ç†æ’ä»¶ä¸­çš„<code>extractEvents</code>ï¼Œåˆæˆäº‹ä»¶æºå¯¹è±¡,æ¯æ¬¡Reactä¼šä»äº‹ä»¶æºå¼€å§‹ï¼Œä»ä¸Šéå†ç±»å‹ä¸º hostComponentå³ domç±»å‹çš„fiber,åˆ¤æ–­propsä¸­æ˜¯å¦æœ‰å½“å‰äº‹ä»¶æ¯”å¦‚onClick,æœ€ç»ˆå½¢æˆä¸€ä¸ªäº‹ä»¶æ‰§è¡Œé˜Ÿåˆ—ï¼ŒReactå°±æ˜¯ç”¨è¿™ä¸ªé˜Ÿåˆ—ï¼Œæ¥æ¨¡æ‹Ÿäº‹ä»¶æ•è·-&gt;äº‹ä»¶æº-&gt;äº‹ä»¶å†’æ³¡è¿™ä¸€è¿‡ç¨‹ã€‚</strong></li> <li><strong>â‘¢æœ€åé€šè¿‡<code>runEventsInBatch</code>æ‰§è¡Œäº‹ä»¶é˜Ÿåˆ—ï¼Œå¦‚æœå‘ç°é˜»æ­¢å†’æ³¡ï¼Œé‚£ä¹ˆbreakè·³å‡ºå¾ªç¯ï¼Œæœ€åé‡ç½®äº‹ä»¶æºï¼Œæ”¾å›åˆ°äº‹ä»¶æ± ä¸­ï¼Œå®Œæˆæ•´ä¸ªæµç¨‹ã€‚</strong></li></ul> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">evnent_click.jpg</p> <h1 id="äº”-å…³äºreact-v17ç‰ˆæœ¬çš„äº‹ä»¶ç³»ç»Ÿ"><a href="#äº”-å…³äºreact-v17ç‰ˆæœ¬çš„äº‹ä»¶ç³»ç»Ÿ" class="header-anchor">#</a> äº” å…³äºreact v17ç‰ˆæœ¬çš„äº‹ä»¶ç³»ç»Ÿ</h1> <p>React v17 æ•´ä½“æ”¹åŠ¨ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯äº‹ä»¶ç³»ç»Ÿçš„æ”¹åŠ¨å´ä¸å°ï¼Œé¦–å…ˆä¸Šè¿°çš„å¾ˆå¤šæ‰§è¡Œå‡½æ•°ï¼Œåœ¨v17ç‰ˆæœ¬ä¸å¤å­˜åœ¨äº†ã€‚æˆ‘æ¥ç®€å•æè¿°ä¸€ä¸‹v17äº‹ä»¶ç³»ç»Ÿçš„æ”¹ç‰ˆã€‚</p> <p><strong>1 äº‹ä»¶ç»Ÿä¸€ç»‘å®šcontainerä¸Šï¼ŒReactDOM.render(appï¼Œ container);è€Œä¸æ˜¯documentä¸Šï¼Œè¿™æ ·å¥½å¤„æ˜¯æœ‰åˆ©äºå¾®å‰ç«¯çš„ï¼Œå¾®å‰ç«¯ä¸€ä¸ªå‰ç«¯ç³»ç»Ÿä¸­å¯èƒ½æœ‰å¤šä¸ªåº”ç”¨ï¼Œå¦‚æœç»§ç»­é‡‡å–å…¨éƒ¨ç»‘å®šåœ¨<code>document</code>ä¸Šï¼Œé‚£ä¹ˆå¯èƒ½å¤šåº”ç”¨ä¸‹ä¼šå‡ºç°é—®é¢˜ã€‚</strong></p> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡">react_17_delegation.png</p> <p><strong>2 å¯¹é½åŸç”Ÿæµè§ˆå™¨äº‹ä»¶</strong></p> <p><code>React 17</code>ä¸­ç»ˆäºæ”¯æŒäº†åŸç”Ÿæ•è·äº‹ä»¶çš„æ”¯æŒï¼Œ å¯¹é½äº†æµè§ˆå™¨åŸç”Ÿæ ‡å‡†ã€‚åŒæ—¶ <code>onScroll</code> äº‹ä»¶ä¸å†è¿›è¡Œäº‹ä»¶å†’æ³¡ã€‚<code>onFocus</code> å’Œ <code>onBlur</code> ä½¿ç”¨åŸç”Ÿ <code>focusin</code>ï¼Œ <code>focusout</code> åˆæˆã€‚</p> <p><strong>3 å–æ¶ˆäº‹ä»¶æ± </strong><code>React 17</code>å–æ¶ˆäº‹ä»¶æ± å¤ç”¨ï¼Œä¹Ÿå°±è§£å†³äº†ä¸Šè¿°åœ¨<code>setTimeout</code>æ‰“å°ï¼Œæ‰¾ä¸åˆ°<code>e.target</code>çš„é—®é¢˜ã€‚</p> <h1 id="å…­-æ€»ç»“"><a href="#å…­-æ€»ç»“" class="header-anchor">#</a> å…­ æ€»ç»“</h1> <p>æœ¬æ–‡ä»<strong>äº‹ä»¶åˆæˆ</strong>ï¼Œ<strong>äº‹ä»¶ç»‘å®š</strong>ï¼Œ<strong>äº‹ä»¶è§¦å‘</strong>ä¸‰ä¸ªæ–¹é¢è¯¦ç»†ä»‹ç»äº†Reactäº‹ä»¶ç³»ç»ŸåŸç†ï¼Œå¸Œæœ›å¤§å®¶èƒ½é€šè¿‡è¿™ç¯‡æ–‡ç« æ›´åŠ æ·±å…¥äº†è§£v16 React äº‹ä»¶ç³»ç»Ÿï¼Œå¦‚æœæœ‰ç–‘é—®å’Œä¸è¶³ä¹‹å¤„ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶èƒ½åœ¨è¯„è®ºåŒºæŒ‡å‡ºã€‚</p> <p>æœ€å, é€äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™ï¼Œè§‰å¾—æœ‰æ”¶è·çš„æœ‹å‹å¯ä»¥ç»™ç¬”è€…<strong>ç‚¹èµï¼Œå…³æ³¨</strong>ä¸€æ³¢ ï¼Œé™†ç»­æ›´æ–°å‰ç«¯è¶…ç¡¬æ ¸æ–‡ç« ã€‚</p> <p>æå‰é€æ¼ï¼šæ¥ä¸‹æ¥ä¼šå‡ºä¸€éƒ¨æ­ç§˜<code>react</code>è°ƒåº¦ç³»ç»Ÿçš„æ–‡ç« ã€‚æ„Ÿå…´è¶£çš„åŒå­¦è¯·å…³æ³¨å…¬ä¼—å· <strong>å‰ç«¯Sharing</strong> ç¬¬ä¸€æ—¶é—´æ›´æ–°å‰ç«¯ç¡¬æ–‡ã€‚</p> <h2 id="å¾€æœŸreactæ–‡ç« "><a href="#å¾€æœŸreactæ–‡ç« " class="header-anchor">#</a> å¾€æœŸreactæ–‡ç« </h2> <p><strong>Reactè¿›é˜¶ç³»åˆ—</strong></p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg5MjMxMzY5Mw==&amp;mid=2247484812&amp;idx=1&amp;sn=d38f85074461912dfd53d5afb2a73646&amp;chksm=cfc14cbef8b6c5a81095205f9f82c4b308455f36d261743807b3361e1d1fd5c612a25aaeca68&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">ã€ŒReactè¿›é˜¶ã€ Reactå…¨éƒ¨apiè§£è¯»+åŸºç¡€å®è·µå¤§å…¨(å¤¯å®åŸºç¡€ä¸‡å­—æ€»ç»“)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg5MjMxMzY5Mw==&amp;mid=2247484634&amp;idx=1&amp;sn=618673960ee73b55df82efe886fd6cdd&amp;chksm=cfc14de8f8b6c4fed909929339dd7ed4092af462de88150767173baea4a7fcb3e3ed501daefd&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">ã€Œreactè¿›é˜¶ã€ä¸€æ–‡åƒé€react-hooksåŸç†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg5MjMxMzY5Mw==&amp;mid=2247484613&amp;idx=1&amp;sn=c97b435638d9b21c8869d4e51e3a295a&amp;chksm=cfc14df7f8b6c4e19707a17691c16f43282ad10abc0fb046d4bdf5e4a83e0057e6ab72510e1e&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">ã€Œreactè¿›é˜¶ã€ä¸€æ–‡åƒé€Reacté«˜é˜¶ç»„ä»¶(HOC)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://mp.weixin.qq.com/s?__biz=Mzg5MjMxMzY5Mw==&amp;mid=2247484275&amp;idx=1&amp;sn=d0a2f61cfaf0004d9683c7b940ce704e&amp;chksm=cfc14a41f8b6c35772077397e778060c7849ff8a73faf2a38c570215b2d3c924d1d6e87a28b2&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">ã€Œreactè¿›é˜¶ã€å¹´ç»ˆé€ç»™reactå¼€å‘è€…çš„å…«æ¡ä¼˜åŒ–å»ºè®®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="header-anchor">#</a> å‚è€ƒæ–‡æ¡£</h2> <ul><li>reactæºç </li> <li>React äº‹ä»¶ç³»ç»Ÿå·¥ä½œåŸç†</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/events/reactäº‹ä»¶ç³»ç»ŸåŸç†.html" class="prev">
        React äº‹ä»¶ç³»ç»ŸåŸç†
      </a></span> <span class="next"><a href="/events/ä¸€æ–‡è¯»æ‡‚Reactç»„ä»¶æ¸²æŸ“æ ¸å¿ƒåŸç†.html">
        ä¸€æ–‡è¯»æ‡‚ React ç»„ä»¶æ¸²æŸ“æ ¸å¿ƒåŸç†
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.27287fd6.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/67.aa46c62c.js" defer></script>
  </body>
</html>
